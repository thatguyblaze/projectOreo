/* ==========================================================================
   Brokie Casino Stylesheet (Fluent Dark Theme) v3.7
   - Added Sabacc styles.
   - Corrected conic-gradient for European Roulette wheel (1 green slot).
   - Uses direct hex color values instead of theme() for browser compatibility.
   - Includes fixes for card/background contrast and button colors.
   - Includes styles for roulette black buttons and number placeholders.
   - Added z-index to roulette numbers.
   - Added potential fixes for SVG text rendering.
   - Added .has-bet style for roulette buttons.
   - Enhanced roulette wheel visual appearance based on reference image.
   - Added inner overlay to wheel for shorter 'spots'.
   - Added continuous spin animation rule & applied by default.
   - Added basic styles for #roulette-ball and visibility class.
   * - NEW: Replaced old #coin styles with 3D flip styles (.coin-container, .coin-face, animation).
   ========================================================================== */

/* --- Base Styles & Background Animation --- */

@keyframes subtleGradientShift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

/* Base body styles are applied via Tailwind classes in the HTML body tag */
/* The tailwind.config script in the HTML defines the fluent-* colors */
/* Body background uses bg-fluent-bg -> #1c1c1c */
/* Body text uses text-fluent-text-primary -> #f5f5f5 */

/* Custom Scrollbar (Optional, Webkit browsers) */
.custom-scrollbar::-webkit-scrollbar {
    width: 8px;
}
.custom-scrollbar::-webkit-scrollbar-track {
    background: #2d2d2d; /* fluent-card (updated) */
}
.custom-scrollbar::-webkit-scrollbar-thumb {
    background: #4a4a4a; /* fluent-border */
    border-radius: 4px;
}
.custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: #5a5a5a; /* Slightly lighter border */
}

/* --- Hero Section --- */

@keyframes heroGradientFlow {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
}

#hero {
    border-bottom: 1px solid rgba(74, 74, 74, 0.5); /* fluent-border with opacity */
    box-shadow: 0 5px 25px rgba(0,0,0,0.4);
    position: relative;
    overflow: hidden;
    background-color: #2a2a2a; /* fluent-surface */
}

#hero::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(110deg, transparent 20%, rgba(0, 120, 212, 0.08) 45%, rgba(0, 120, 212, 0.08) 55%, transparent 80%);
    background-size: 300% 100%;
    animation: heroGradientFlow 15s linear infinite;
    z-index: 0;
}

#hero > div {
    z-index: 1;
    position: relative;
}

.hero-button {
    background-color: #0078d4; /* fluent-primary */
    color: #ffffff;
    padding: 0.75rem 1.75rem;
    border-radius: 0.375rem; /* rounded-md */
    font-weight: 600; /* font-semibold */
    box-shadow: 0 4px 10px rgba(0, 120, 212, 0.25); /* Shadow using primary color */
    transition: all 0.2s ease-in-out;
}
.hero-button:hover {
    background-color: #005a9e; /* Darker shade of primary */
    box-shadow: 0 6px 15px rgba(0, 120, 212, 0.35);
    transform: translateY(-2px);
}

.bg-grid-pattern {
     background-image: linear-gradient(to right, rgba(74, 74, 74, 0.2) 1px, transparent 1px), linear-gradient(to bottom, rgba(74, 74, 74, 0.2) 1px, transparent 1px); /* fluent-border with alpha */
     background-size: 20px 20px; /* Adjust grid size */
}

/* --- Left Sidebar Components --- */

.info-nav-card {
    background-color: #2d2d2d; /* fluent-card (updated) */
    border: 1px solid #4a4a4a; /* fluent-border */
    border-radius: 0.75rem; /* rounded-xl */
    padding: 1rem; /* p-4 */
    box-shadow: 0 3px 10px rgba(0,0,0,0.25);
}

.info-nav-title {
    font-size: 0.8rem;
    font-weight: 600;
    color: #b0b0b0; /* fluent-text-secondary */
    text-transform: uppercase;
    letter-spacing: 0.05em;
    padding-bottom: 0.5rem;
    margin-bottom: 0.75rem;
    border-bottom-width: 2px; /* Thicker border */
    display: inline-block; /* Fit content width */
}

.balance-value {
    font-size: 2rem; /* text-3xl */
    font-weight: 700; /* font-bold */
    color: #0078d4; /* fluent-primary */
}
.loan-value {
    font-size: 0.8rem; /* text-xs */
    color: #b0b0b0; /* fluent-text-secondary */
}
.loan-value span {
    font-weight: 500; /* font-medium */
    color: #f5f5f5; /* fluent-text-primary */
}

.loan-button {
    font-size: 0.75rem; /* text-xs */
    padding: 0.4rem 0.8rem;
    border-radius: 0.375rem; /* rounded-md */
    font-weight: 600; /* font-semibold */
    text-align: center;
    transition: all 0.15s ease;
    border: 1px solid transparent;
    width: 100%;
    box-shadow: 0 1px 2px rgba(0,0,0,0.15);
}
.loan-button.get {
    background-color: #107c10; /* fluent-accent */
    color: #ffffff;
    border-color: #107c10; /* fluent-accent */
}
.loan-button.get:hover:not(:disabled) {
    background-color: #0d630d; /* Darker green */
    filter: brightness(1.1);
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}
.loan-button.pay {
    background-color: #ffb900; /* fluent-warning */
    color: #1c1c1c; /* fluent-bg (Dark text on yellow) */
    border-color: #ffb900; /* fluent-warning */
}
.loan-button.pay:hover:not(:disabled) {
    background-color: #e0a800; /* Darker yellow */
    filter: brightness(1.1);
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}
.loan-button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    background-color: #404040 !important; /* Use a specific gray */
    border-color: #404040 !important;
    color: #6a6a6a !important; /* fluent-text-disabled */
    box-shadow: none;
}
.loan-button:active:not(:disabled) {
    transform: scale(0.98);
    filter: brightness(0.95);
}

/* --- Game Navigation Tabs (Vertical) --- */
.tab-button {
    color: #b0b0b0; /* fluent-text-secondary */
    transition: all 0.15s ease-in-out;
    text-align: left;
    border-left: 3px solid transparent;
    padding: 0.6rem calc(0.75rem - 3px); /* Adjust padding for border */
    font-size: 0.9rem;
    border-radius: 0.375rem; /* rounded-md */
}
.tab-button:hover {
    background-color: rgba(74, 74, 74, 0.3); /* fluent-border with alpha */
    color: #f5f5f5; /* fluent-text-primary */
    border-left-color: #4a4a4a; /* fluent-border */
}
.tab-button[aria-current="page"] {
    background-color: rgba(0, 120, 212, 0.1); /* fluent-primary with alpha */
    color: #f5f5f5; /* fluent-text-primary */
    font-weight: 600; /* font-semibold */
    border-left-color: #0078d4; /* fluent-primary */
}
.tab-button .emoji {
    display: inline-block;
    width: 1.25rem; /* w-5 */
    text-align: center;
    margin-right: 0.6rem; /* Adjusted margin */
    font-size: 1rem; /* Ensure consistent emoji size */
}

/* --- Stats/Leaderboard Styles --- */
#leaderboard-list {
    list-style: none;
    padding-left: 0;
    margin-top: 0;
    max-height: 10rem; /* Limit height */
    overflow-y: auto; /* Add scroll if needed */
}
#leaderboard-list li {
    font-size: 0.8rem; /* text-xs */
    padding: 0.3rem 0;
    border-bottom: 1px dashed rgba(74, 74, 74, 0.5); /* fluent-border with opacity */
    color: #b0b0b0; /* fluent-text-secondary */
}
#leaderboard-list li:last-child {
    border-bottom: none;
}
#leaderboard-list li span:first-child { /* Player name/placeholder */
    color: #f5f5f5; /* fluent-text-primary */
}
#leaderboard-list li span:last-child { /* Win amount */
    color: #107c10; /* fluent-accent */
    font-weight: 500; /* font-medium */
}

.session-stats-list {
    list-style: none;
    padding-left: 0;
    margin-top: 0;
    font-size: 0.8rem; /* text-xs */
    color: #b0b0b0; /* fluent-text-secondary */
}
.session-stats-list p {
    display: flex;
    justify-content: space-between;
    padding: 0.1rem 0;
}
.stats-value {
    font-weight: 600; /* font-semibold */
}
.stats-value.text-fluent-accent { color: #107c10; /* fluent-accent */ }
.stats-value.text-fluent-danger { color: #e81123; /* fluent-danger */ }
.stats-value.text-fluent-text-primary { color: #f5f5f5; /* fluent-text-primary */ }

/* --- Game Area --- */

.game-container {
    background-color: #2d2d2d; /* fluent-card (updated) */
    border: 1px solid #4a4a4a; /* fluent-border */
    border-radius: 0.75rem; /* rounded-xl */
    box-shadow: 0 5px 20px rgba(0,0,0,0.3);
}

.game-area {
    transition: opacity 0.3s ease-in-out;
}

/* --- General Button Styles (Used by Games) --- */

.game-button, .toggle-button, .modal-button, .coinflip-choice-btn, .horse-select-btn, .roulette-bet-btn {
    padding: 0.6rem 1.2rem;
    border-radius: 0.375rem; /* rounded-md */
    font-weight: 500; /* font-medium */
    transition: all 0.15s ease-in-out;
    border: 1px solid transparent;
    cursor: pointer;
    text-align: center;
    box-shadow: 0 1px 3px rgba(0,0,0,0.2);
    display: inline-flex; /* Allows alignment */
    align-items: center;
    justify-content: center;
    line-height: 1.25; /* Adjust for text centering */
    vertical-align: middle; /* Align better with inputs */
}

.game-button:disabled, .toggle-button:disabled, .modal-button:disabled, .coinflip-choice-btn:disabled, .horse-select-btn:disabled, .roulette-bet-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    background-color: #404040 !important; /* Specific gray */
    border-color: #404040 !important;
    color: #6a6a6a !important; /* fluent-text-disabled */
    box-shadow: none !important;
    transform: none !important;
    filter: none !important;
}

.game-button:hover:not(:disabled), .toggle-button:hover:not(:disabled), .modal-button:hover:not(:disabled), .coinflip-choice-btn:hover:not(:disabled), .horse-select-btn:hover:not(:disabled), .roulette-bet-btn:hover:not(:disabled) {
    filter: brightness(1.15);
    box-shadow: 0 2px 5px rgba(0,0,0,0.25);
    transform: translateY(-1px); /* Subtle lift */
}

.game-button:active:not(:disabled), .toggle-button:active:not(:disabled), .modal-button:active:not(:disabled), .coinflip-choice-btn:active:not(:disabled), .horse-select-btn:active:not(:disabled), .roulette-bet-btn:active:not(:disabled) {
    transform: scale(0.98) translateY(0); /* Scale down slightly */
    filter: brightness(0.95);
    box-shadow: 0 1px 2px rgba(0,0,0,0.15);
}

.game-button.primary, .modal-button {
    background-color: #0078d4; /* fluent-primary */
    color: #ffffff;
    border-color: #0078d4; /* fluent-primary */
}
.game-button.secondary, .toggle-button.secondary, .horse-select-btn {
    background-color: #404040; /* Specific gray */
    color: #ffffff;
    border-color: #5a5a5a; /* Slightly lighter gray */
}
.game-button.success {
    background-color: #107c10; /* fluent-accent */
    color: #ffffff;
    border-color: #107c10; /* fluent-accent */
}
.game-button.danger {
    background-color: #e81123; /* fluent-danger */
    color: #ffffff;
    border-color: #e81123; /* fluent-danger */
}
.game-button.warning {
    background-color: #ffb900; /* fluent-warning */
    color: #1c1c1c; /* fluent-bg (Dark text) */
    border-color: #ffb900; /* fluent-warning */
}

.toggle-button.active {
    background-color: #0078d4; /* fluent-primary */
    color: #ffffff;
    border-color: #005a9e; /* Darker primary */
}
#crash-auto-cashout-toggle.active {
    background-color: #ffb900; /* fluent-warning */
    color: #1c1c1c; /* fluent-bg */
    border-color: #e0a800; /* Darker warning */
}

.coinflip-choice-btn.selected {
    border-width: 2px;
    border-color: #ffb900; /* fluent-warning */
    box-shadow: 0 0 8px rgba(255, 185, 0, 0.6); /* fluent-warning with alpha */
}
.horse-select-btn.selected {
    border-width: 2px;
    border-color: #ffb900; /* fluent-warning */
    box-shadow: 0 0 8px rgba(255, 185, 0, 0.6); /* fluent-warning with alpha */
    background-color: #5a5a5a; /* Darker gray */
}

.roulette-bet-btn.has-bet {
    border-color: #ffb900; /* fluent-warning border */
    box-shadow: 0 0 6px rgba(255, 185, 0, 0.4); /* fluent-warning glow */
    transform: scale(1.03); /* Slightly larger */
    font-weight: 600; /* Make text bolder */
}
.roulette-bet-btn.has-bet:hover:not(:disabled) {
    transform: scale(1.03) translateY(-1px); /* Combine effects */
}


/* --- Bet Adjustment Buttons --- */
.bet-adjust-btn {
    background-color: #404040; /* Specific gray */
    color: #ffffff;
    padding: 0.25rem 0.6rem;
    border: 1px solid #5a5a5a; /* Slightly lighter gray */
    border-radius: 0.25rem; /* rounded-sm */
    font-size: 0.8rem;
    line-height: 1;
    min-width: 35px; /* Ensure minimum size */
    transition: all 0.15s ease;
}
.bet-adjust-btn:hover:not(:disabled) {
    background-color: #5a5a5a;
    border-color: #6a6a6a;
}
.bet-adjust-btn:active:not(:disabled) {
    transform: scale(0.97);
}
.bet-adjust-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

/* --- Input Fields --- */
input[type="number"] {
    background-color: #2d2d2d; /* fluent-card (updated) */
    border: 1px solid #404040; /* Dark gray border */
    color: #f5f5f5; /* fluent-text-primary */
    border-radius: 0.25rem; /* rounded-sm */
    padding: 0.25rem 0.5rem;
    text-align: center;
    -moz-appearance: textfield; /* Remove spinners Firefox */
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
    vertical-align: middle; /* Align better with buttons */
}
input[type="number"]::-webkit-outer-spin-button,
input[type="number"]::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
}
input[type="number"]:focus {
    border-color: #0078d4; /* fluent-primary */
    outline: 2px solid transparent;
    outline-offset: 2px;
    box-shadow: 0 0 0 2px rgba(0, 120, 212, 0.5); /* fluent-primary with alpha */
}
input[type="number"]:disabled {
    background-color: #1f1f1f; /* Darker bg */
    opacity: 0.6;
    cursor: not-allowed;
    border-color: #303030; /* Even darker border */
}
.auto-cashout-input {
    background-color: #2d2d2d; /* fluent-card (updated) */
    border: 1px solid #404040;
    color: #f5f5f5; /* fluent-text-primary */
    border-radius: 0.25rem;
    padding: 0.1rem 0.3rem; /* Smaller padding */
    text-align: center;
}

/* --- Accordion Styles --- */
.accordion-item {
    background-color: #2d2d2d; /* fluent-card (updated) */
    border-radius: 0.375rem; /* rounded-md */
    border: 1px solid #4a4a4a; /* fluent-border */
    overflow: hidden; /* Clip content */
}
.accordion-button {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
    padding: 0.75rem 1rem;
    font-weight: 500; /* font-medium */
    color: #f5f5f5; /* fluent-text-primary */
    background-color: transparent;
    border: none;
    cursor: pointer;
    transition: background-color 0.2s ease;
}
.accordion-button:hover {
    background-color: #4a4a4a; /* Use border color for hover */
}
.accordion-icon {
    font-size: 1rem;
    transition: transform 0.3s ease;
    font-weight: bold;
    color: #0078d4; /* fluent-primary */
}
.accordion-content {
    max-height: 0; /* Initially hidden */
    overflow: hidden;
    padding: 0 1rem; /* Horizontal padding only when closed */
    transition: max-height 0.3s ease-out, padding 0.3s ease-out, opacity 0.3s ease-out;
    color: #b0b0b0; /* fluent-text-secondary */
    font-size: 0.875rem; /* text-sm */
    line-height: 1.6;
    opacity: 0;
}
.accordion-content.open {
    padding-top: 0.25rem; /* Add padding when open */
    padding-bottom: 1rem;
    opacity: 1;
}
.accordion-content p {
    margin-bottom: 0.5rem;
}
.accordion-content p:last-child {
    margin-bottom: 0;
}

/* --- Modals (ATM) --- */
#atm-modal-overlay {
    background-color: rgba(0,0,0,0.8);
    backdrop-filter: blur(5px); /* Blur background */
}
#atm-modal {
    background-color: #2c2c2c; /* Slightly lighter surface */
    border: 1px solid #505050; /* Slightly lighter border */
}

/* --- Game Specific Styles --- */

/* Slots */
.reel {
    border: 2px solid #404040;
    background-color: #2d2d2d;
    color: #f5f5f5;
    overflow: hidden;
    width: 80px; height: 100px;
    display: flex; flex-direction: column;
    align-items: center; justify-content: center;
    font-size: 3rem;
    border-radius: 0.5rem;
    box-shadow: inset 0 2px 4px rgba(0,0,0,0.5);
    transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
}
.reel.win-effect {
    transform: scale(1.05);
    box-shadow: inset 0 2px 4px rgba(0,0,0,0.5), 0 0 15px rgba(0, 120, 212, 0.6);
    border-color: #0078d4;
}
.reel-container {
    position: relative; height: 100px; overflow: hidden; width: 100%;
}
.reel-symbols {
    position: absolute; top: 0; left: 0; width: 100%;
    text-align: center;
    transition: top 0.5s cubic-bezier(0.25, 1, 0.5, 1);
    color: #f5f5f5;
}
#payout-legend {
    margin-top: 1.5rem; padding-top: 1rem;
    border-top: 1px solid rgba(74, 74, 74, 0.5);
    font-size: 0.875rem;
    color: #b0b0b0;
}
#payout-legend h4 {
    font-weight: 600;
    color: #f5f5f5;
    margin-bottom: 0.5rem;
    text-align: center;
}
#payout-legend ul {
    list-style: none; padding: 0;
    max-width: 250px; margin-left: auto; margin-right: auto;
}
#payout-legend li {
    display: flex; justify-content: space-between;
    padding: 0.25rem 0;
    font-size: 0.75rem;
}
#payout-legend li span:first-child {
    font-family: monospace;
    margin-right: 1rem;
    font-size: 1rem;
}
#payout-legend li span:last-child {
    font-weight: 500;
    color: #f5f5f5;
}

/* Crash */
#crash-graph {
    height: 250px;
    background-color: #2d2d2d;
    border-radius: 0.5rem;
    display: flex; align-items: center; justify-content: center;
    font-size: 2rem; font-weight: bold;
    color: #b0b0b0;
    position: relative; overflow: hidden;
    border: 1px solid #404040;
}
#crash-svg {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 5;
}
#crash-svg .grid-line {
    stroke: #404040;
    stroke-width: 0.5;
    vector-effect: non-scaling-stroke;
}
#crash-svg .grid-label {
    font-family: inherit;
    text-anchor: start;
    dominant-baseline: middle;
    vector-effect: non-scaling-stroke;
}
#crash-polyline {
    fill: none;
    stroke: #0078d4;
    stroke-width: 2.5;
    stroke-linecap: round;
    stroke-linejoin: round;
    transition: stroke 0.2s linear;
    vector-effect: non-scaling-stroke;
}
#crash-multiplier {
    z-index: 10;
    background-color: rgba(42, 42, 42, 0.8);
    color: #f5f5f5;
    padding: 0.3rem 0.8rem;
    border-radius: 0.375rem;
    transition: transform 0.1s ease, color 0.2s ease-out, font-size 0.2s ease-out;
    font-size: 1.75rem;
    display: inline-block;
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
}
#crash-multiplier.win-effect {
    transform: translate(-50%, -50%) scale(1.1);
    box-shadow: 0 0 15px rgba(0, 120, 212, 0.7);
    color: #0078d4;
}
.mult-color-5x { color: #ffee58; }
.mult-color-10x { color: #ffa726; }
.mult-color-15x { color: #ff7043; }
.mult-color-20x { color: #ef5350; }
.mult-color-30x { color: #ec407a; }
.mult-size-10x { font-size: 1.85rem; }
.mult-size-20x { font-size: 1.95rem; }
.mult-size-30x { font-size: 2.05rem; font-weight: 700; }


/* === START NEW Coin Flip 3D Styles === */
.coin-container {
    width: 60px;  /* Adjust size as needed */
    height: 60px; /* Adjust size as needed */
    position: relative;
    margin: 20px auto; /* Center it */
    perspective: 1000px; /* How intense the 3D effect is */
    cursor: default;
}

.coin-face {
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
    backface-visibility: hidden; /* Hide the back */
    transform-style: preserve-3d;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 40px; /* Adjust emoji size */
    border-radius: 50%;
    box-shadow: inset 0 0 10px rgba(0,0,0,0.5), 0 2px 5px rgba(0,0,0,0.3);
}

.coin-front {
    background: linear-gradient(135deg, #4a90e2, #357ABD); /* Example Blue Gradient */
    color: white;
    z-index: 2;
    /* transform: rotateY(0deg); // Default */
}

.coin-back {
    background: linear-gradient(135deg, #f8e71c, #f5a623); /* Example Yellow Gradient */
    color: black;
    transform: rotateY(180deg); /* Start hidden */
}

/* Animation */
/* Apply animation to the container */
.coin-container.flipping {
    animation: coin-flip-animation 0.6s linear; /* Match JS timeout */
    /* Animation runs once per click via class add/remove */
}

@keyframes coin-flip-animation {
    from {
        transform: rotateY(0deg);
    }
    to {
        /* Multiple rotations for effect (e.g., 5 * 360 = 1800) */
        transform: rotateY(1800deg); /* Adjust degrees for more/less spin */
    }
}
/* === END NEW Coin Flip 3D Styles === */


/* Minefield */
#minefield-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 0.5rem;
    max-width: 240px;
    margin: 1rem auto;
}
.minefield-tile {
    aspect-ratio: 1 / 1;
    background-color: #404040;
    border: 1px solid #5a5a5a;
    border-radius: 0.375rem;
    display: flex; align-items: center; justify-content: center;
    font-size: 1.5rem;
    cursor: pointer;
    transition: background-color 0.2s ease, transform 0.1s ease, border-color 0.2s ease;
}
.minefield-tile:hover:not(.revealed):not(:disabled) {
    background-color: #5a5a5a;
}
.minefield-tile:active:not(.revealed):not(:disabled) {
    transform: scale(0.95);
}
.minefield-tile.revealed.safe {
    background-color: #107c10;
    color: white; cursor: default;
    border-color: #107c10;
}
.minefield-tile.revealed.bomb {
    background-color: #e81123;
    color: white; cursor: default;
    border-color: #e81123;
    animation: shake-strong 0.3s ease-in-out;
}
.minefield-tile:disabled {
    opacity: 0.7; cursor: not-allowed;
}

/* Memory */
#memory-grid {
    display: grid; grid-template-columns: repeat(4, 1fr);
    gap: 0.5rem;
    max-width: 280px;
    margin: 1rem auto;
    perspective: 1000px;
}
.memory-card {
    aspect-ratio: 1 / 1;
    background-color: transparent; border: none;
    border-radius: 0.375rem;
    display: flex; align-items: center; justify-content: center;
    font-size: 1.75rem;
    cursor: pointer; position: relative;
    transform-style: preserve-3d;
    transition: transform 0.5s ease;
    transform: rotateY(0deg);
}
.memory-card .card-face {
    position: absolute; width: 100%; height: 100%;
    backface-visibility: hidden;
    display: flex; align-items: center; justify-content: center;
    border-radius: 0.375rem;
    transition: background-color 0.2s ease, border-color 0.2s ease;
    border: 1px solid #4a4a4a;
}
.memory-card .card-front {
    background-color: #404040;
    color: #f5f5f5;
    transform: rotateY(0deg);
}
.memory-card .card-back {
    background-color: #2d2d2d;
    color: #f5f5f5;
    transform: rotateY(180deg);
}
.memory-card.revealed {
    transform: rotateY(180deg);
    cursor: default;
}
.memory-card.matched {
    cursor: default; opacity: 0.8;
}
.memory-card.matched .card-back {
    background-color: #107c10;
    border-color: #0d630d;
}
.memory-card.mismatched .card-back {
    background-color: #e81123;
    border-color: #d13438;
    animation: shake-subtle 0.4s ease-in-out;
}
.memory-card:disabled {
    cursor: not-allowed; opacity: 0.6;
}

/* Horse Race */
#horserace-track {
    position: relative; width: 100%; height: 200px;
    background-color: #2d2d2d;
    border: 2px solid #404040;
    border-radius: 0.5rem;
    overflow: hidden;
    margin-top: 1rem; padding: 0.5rem 0;
    display: flex; flex-direction: column;
}
.horse-lane {
    width: 100%; flex-grow: 1;
    border-bottom: 1px dashed #4a4a4a;
    display: flex; align-items: center;
    position: relative;
}
.horse-lane:last-child {
    border-bottom: none;
}
.horse {
    position: absolute;
    right: 10px;
    font-size: 1.75rem;
    transition: right 0.1s linear;
    padding: 0 5px; line-height: 1;
    display: inline-block;
    z-index: 5;
    will-change: right;
}
#horserace-finish-line {
    position: absolute;
    left: 20px;
    top: 0; bottom: 0; width: 5px;
    background: repeating-linear-gradient( white, white 10px, black 10px, black 20px );
    z-index: 10;
}
.horse-trail {
    position: absolute; width: 6px; height: 6px; border-radius: 50%; opacity: 0.7;
    animation: fadeOutShrink 0.5s linear forwards;
    pointer-events: none;
    z-index: 1;
}
@keyframes fadeOutShrink {
    from { opacity: 0.7; transform: scale(1) translateY(-50%); }
    to { opacity: 0; transform: scale(0) translateY(-50%); }
}
#horserace-selection {
    display: flex; flex-wrap: wrap;
    gap: 0.5rem;
    justify-content: center;
    margin-top: 0.5rem;
}
.horse-select-btn {
    padding: 0.5rem 1rem;
    border-width: 1px;
    font-size: 0.875rem;
    gap: 0.5rem;
}
.horse-select-btn .horse-color-indicator {
    display: inline-block; width: 1rem; height: 1rem;
    border-radius: 9999px;
    border: 1px solid rgba(255, 255, 255, 0.5);
}

/* Roulette */
@keyframes continuous-spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
#roulette-wheel-container { width: 250px; height: 250px; margin: 1rem auto; perspective: 800px; border: 8px solid #383838; border-radius: 50%; position: relative; overflow: hidden; background-color: #1a1a1a; box-shadow: inset 0 0 20px rgba(0,0,0,0.7), 0 6px 18px rgba(0,0,0,0.5); }
#roulette-wheel { width: 100%; height: 100%; border-radius: 50%; position: absolute; top: 0; left: 0; background-image: conic-gradient( #107c10 0.000deg 9.730deg, #d13438 9.730deg 19.459deg, #111827 19.459deg 29.189deg, #d13438 29.189deg 38.919deg, #111827 38.919deg 48.649deg, #d13438 48.649deg 58.378deg, #111827 58.378deg 68.108deg, #d13438 68.108deg 77.838deg, #111827 77.838deg 87.568deg, #d13438 87.568deg 97.297deg, #111827 97.297deg 107.027deg, #d13438 107.027deg 116.757deg, #111827 116.757deg 126.486deg, #d13438 126.486deg 136.216deg, #111827 136.216deg 145.946deg, #d13438 145.946deg 155.676deg, #111827 155.676deg 165.405deg, #d13438 165.405deg 175.135deg, #111827 175.135deg 184.865deg, #d13438 184.865deg 194.595deg, #111827 194.595deg 204.324deg, #d13438 204.324deg 214.054deg, #111827 214.054deg 223.784deg, #d13438 223.784deg 233.514deg, #111827 233.514deg 243.243deg, #d13438 243.243deg 252.973deg, #111827 252.973deg 262.703deg, #d13438 262.703deg 272.432deg, #111827 272.432deg 282.162deg, #d13438 282.162deg 291.892deg, #111827 291.892deg 301.622deg, #d13438 301.622deg 311.351deg, #111827 311.351deg 321.081deg, #d13438 321.081deg 330.811deg, #111827 330.811deg 340.541deg, #d13438 340.541deg 350.270deg, #111827 350.270deg 360.000deg ); will-change: transform; }
#roulette-wheel.continuous-spin { animation: continuous-spin 20s linear infinite; transition: none; }
#roulette-wheel::before { content: ''; position: absolute; top: 15%; left: 15%; right: 15%; bottom: 15%; background: radial-gradient(circle, #2e2e2e 50%, #1a1a1a 100%); border-radius: 50%; z-index: 1; box-shadow: inset 0 0 15px 5px rgba(0,0,0,0.6); }
.roulette-number { position: absolute; display: flex; align-items: center; justify-content: center; width: 22px; height: 22px; font-size: 10px; font-weight: bold; color: rgba(255, 255, 255, 0.9); text-shadow: 0px 0px 2px rgba(0,0,0,0.8), 0px 1px 1px rgba(0,0,0,1); transform: translate(-50%, -50%); pointer-events: none; z-index: 2; /* Ensure numbers are above overlay */ }
#roulette-pointer { position: absolute; top: -14px; left: 50%; transform: translateX(-50%); width: 0; height: 0; border-left: 9px solid transparent; border-right: 9px solid transparent; border-top: 16px solid #ffbb00; /* Warning color */ z-index: 10; filter: drop-shadow(0px 2px 2px rgba(0,0,0,0.6)); }
#roulette-result { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 65px; height: 65px; background: radial-gradient(circle, #4a4a4a 0%, #2d2d2d 70%); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.6rem; font-weight: bold; color: #fff; z-index: 5; border: 5px solid #5a5a5a; box-shadow: inset 0 2px 6px rgba(0,0,0,0.7), 0 2px 4px rgba(0,0,0,0.4); }
#roulette-result.red { background: radial-gradient(circle, #ff6b6b 0%, #d13438 70%); color: white; border-color: #a71d2a;}
#roulette-result.black { background: radial-gradient(circle, #555 0%, #111827 70%); color: white; border-color: #000;}
#roulette-result.green { background: radial-gradient(circle, #50c878 0%, #107c10 70%); color: white; border-color: #0a5d0a;}
#roulette-ball { position: absolute; width: 12px; height: 12px; background-color: #f0f0f0; border-radius: 50%; z-index: 8; box-shadow: inset 0 -2px 2px rgba(0,0,0,0.3), 0 0 5px white; opacity: 0; visibility: hidden; transition: opacity 0.2s ease, visibility 0.2s ease; top: 10%; left: 50%; transform: translate(-50%, -50%); pointer-events: none; will-change: transform, top, left; }
#roulette-ball.visible { opacity: 1; visibility: visible; }
#roulette-betting-area { margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid rgba(74, 74, 74, 0.5); }
.roulette-bet-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.5rem; max-width: 300px; margin: 0 auto 1rem auto; }
.roulette-bet-btn { padding: 0.5rem; border-width: 1px; border-radius: 0.25rem; font-size: 0.875rem; min-height: 36px; transition: all 0.15s ease-in-out, border-color 0.2s ease, box-shadow 0.2s ease, transform 0.2s ease; }
.roulette-bet-btn.red { background-color: #d13438; color: white; border-color: #a71d2a; }
.roulette-bet-btn.black { background-color: #111827; color: white; border-color: #1f2937; }
.roulette-bet-btn.green { background-color: #107c10; color: white; border-color: #0d630d; }
.roulette-bet-btn.outside { grid-column: span 1; padding: 0.75rem; background-color: #404040; border-color: #5a5a5a; color: #f5f5f5; }
.roulette-outside-bets { display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.5rem; max-width: 300px; margin: 0 auto; }

/* Blackjack */
.blackjack-hand { display: flex; flex-wrap: wrap; justify-content: center; gap: 0.5rem; min-height: 90px; margin-bottom: 1rem; padding: 0.5rem; background-color: #2d2d2d; border-radius: 0.375rem; border: 1px solid #404040; }
.blackjack-card { background-color: white; color: black; border: 1px solid #505050; border-radius: 0.375rem; width: 60px; height: 85px; display: flex; flex-direction: column; justify-content: space-between; align-items: center; padding: 0.25rem; font-weight: 600; font-size: 1rem; box-shadow: 0 2px 4px rgba(0,0,0,0.3); }
.blackjack-card.hidden { background-color: #404040; background-image: repeating-linear-gradient( 45deg, #5a5a5a, #5a5a5a 5px, #404040 5px, #404040 10px ); color: transparent; border-color: #5a5a5a; }
.blackjack-card span:first-child { font-size: 1.25rem; line-height: 1; }
.blackjack-card span:last-child { font-size: 1.5rem; line-height: 1; }
.blackjack-card.suit-red { color: #e81123; }
.blackjack-card.suit-black { color: #111827; }
.blackjack-score { font-weight: 600; font-size: 1.125rem; color: #b0b0b0; }
.blackjack-score-value { font-weight: 700; font-size: 1.25rem; color: #f5f5f5; margin-left: 0.5rem; }
.blackjack-score.busted .blackjack-score-value { color: #e81123; }
.blackjack-score.blackjack .blackjack-score-value { color: #ffb900; }

/* Plinko */
#plinko-canvas { background-color: #2d2d2d; border: 1px solid #404040; border-radius: 0.5rem; display: block; margin: 1rem auto; }

/* Sabacc Styles */
.sabacc-hand { display: flex; flex-wrap: wrap; justify-content: center; gap: 0.5rem; min-height: 110px; margin-bottom: 1rem; padding: 0.5rem; background-color: #2d2d2d; border-radius: 0.375rem; border: 1px solid #404040; }
.sabacc-card { background-color: #4a4a4a; color: #f5f5f5; border: 1px solid #5a5a5a; border-radius: 0.375rem; width: 70px; height: 100px; display: flex; flex-direction: column; justify-content: space-between; align-items: center; padding: 0.3rem 0.2rem; font-weight: 600; box-shadow: 0 2px 4px rgba(0,0,0,0.3); text-align: center; }
.sabacc-card.hidden { background-color: #404040; background-image: repeating-linear-gradient( 45deg, #5a5a5a, #5a5a5a 5px, #404040 5px, #404040 10px ); color: transparent; border-color: #5a5a5a; }
.sabacc-card.hidden span { visibility: hidden; }
.sabacc-card .card-name { font-size: 0.65rem; line-height: 1.1; font-weight: 400; color: #b0b0b0; white-space: normal; overflow-wrap: break-word; max-height: 3.3em; overflow: hidden; }
.sabacc-card .card-value { font-size: 1.5rem; line-height: 1; font-weight: 700; }
.sabacc-card.positive .card-value { color: #107c10; }
.sabacc-card.negative .card-value { color: #e81123; }
.sabacc-card.zero .card-value { color: #ffb900; }
.sabacc-score-value { font-weight: 700; font-size: 1.1em; color: #f5f5f5; margin-left: 0.25rem; }
.sabacc-score-value.busted { color: #e81123; text-decoration: line-through; }


/* --- Animations --- */
@keyframes pulse { 50% { opacity: .5; } }
.animate-pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
@keyframes flash-green { 0%, 100% { color: #107c10; transform: scale(1.05); } 50% { color: #0078d4; transform: scale(1); } }
@keyframes flash-red { 0%, 100% { color: #e81123; transform: scale(1.05); } 50% { color: #0078d4; transform: scale(1); } }
.flash-win { animation: flash-green 0.6s ease-out; }
.flash-loss { animation: flash-red 0.6s ease-out; }
@keyframes shake-subtle { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-1px); } 75% { transform: translateX(1px); } }
@keyframes shake-strong { 0%, 100% { transform: translate(0, 0) rotate(0); } 25% { transform: translate(-2px, 1px) rotate(-0.5deg); } 50% { transform: translate(1px, -1px) rotate(0.5deg); } 75% { transform: translate(2px, 1px) rotate(-0.5deg); } }
.shake-subtle { animation: shake-subtle 0.2s infinite linear; }
.shake-strong { animation: shake-strong 0.15s infinite linear; }
@keyframes slideFadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
.leaderboard-entry-new { animation: slideFadeIn 0.5s ease-out forwards; }

/* --- Message Box --- */
#message-box { position: fixed; bottom: 20px; left: 50%; background-color: #2a2a2a; color: #f5f5f5; padding: 0.75rem 1.5rem; border-radius: 0.5rem; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4); z-index: 100; opacity: 0; visibility: hidden; transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease; border: 1px solid #4a4a4a; font-weight: 500; transform: translate(-50%, 10px); pointer-events: none; }
#message-box.show { opacity: 1; visibility: visible; transform: translateX(-50%); }