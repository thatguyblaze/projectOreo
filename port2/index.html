<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blazinik - Creative Programmer & Designer</title>
    <link rel="icon" type="image/x-icon" href="https://placehold.co/32x32/0a0a0a/e0e7ff?text=B">
    <meta name="description" content="Explore the portfolio of Blazinik, showcasing projects in programming, UI/UX design, and 3D modeling.">

    <meta property="og:title" content="Blazinik - Creative Programmer & Designer" />
    <meta property="og:description" content="Explore the portfolio of Blazinik, showcasing projects in programming, UI/UX design, and 3D modeling." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://blazinik.xyz/" />
    <meta property="og:image" content="https://placehold.co/1200x630/0f172a/e0e7ff?text=Blazinik+Portfolio" />
    <meta property="og:image:alt" content="Blazinik Portfolio Preview" />

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Blazinik - Creative Programmer & Designer">
    <meta name="twitter:description" content="Explore the portfolio of Blazinik, showcasing projects in programming, UI/UX design, and 3D modeling.">
    <meta name="twitter:image" content="https://placehold.co/1200x600/0f172a/e0e7ff?text=Blazinik+Portfolio" />
    <meta name="twitter:image:alt" content="Blazinik Portfolio Preview">

    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">

    <style>
      /* --- Modern Theme CSS Variables --- */
      :root {
        /* Base Palette */
        --bg-dark: #0a0a0a; /* Near black */
        --bg-medium: #111827; /* Dark blue-gray */
        --bg-light: #1f2937; /* Lighter blue-gray */
        --bg-light-translucent: rgba(31, 41, 55, 0.8); /* Translucent light bg */
        --border-color: rgba(55, 65, 81, 0.6); /* Softer border */
        --text-primary: #f9fafb; /* Off-white */
        --text-secondary: #9ca3af; /* Medium gray */
        --text-tertiary: #6b7280; /* Darker gray */
        --text-on-accent: #ffffff;

        /* Primary Accent (Electric Violet & Sky Blue) */
        --accent-start: #8b5cf6; /* Violet */
        --accent-end: #38bdf8; /* Sky Blue */
        --accent-hover-start: #a78bfa;
        --accent-hover-end: #7dd3fc;
        --accent-glow: rgba(139, 92, 246, 0.3); /* Violet glow */

        /* Secondary Accent (Teal & Lime) */
        --accent2-start: #2dd4bf; /* Teal */
        --accent2-end: #a3e635; /* Lime */
        --accent2-hover-start: #5eead4;
        --accent2-hover-end: #bef264;
        --accent2-glow: rgba(45, 212, 191, 0.3); /* Teal glow */

        /* Tertiary Accent (Rose) */
        --accent3: #f43f5e; /* Rose */
        --accent3-hover: #fb7185;
        --accent3-glow: rgba(244, 63, 94, 0.3); /* Rose glow */

        /* Neutral Accent (Slate) */
        --accent-neutral: #475569; /* Slate */
        --accent-neutral-hover: #64748b;
        --accent-neutral-glow: rgba(71, 85, 105, 0.2);

        /* Skill Icon Colors (Vibrant) */
        --blender-color: #f5792a;
        --photoshop-color: #31a8ff;
        --illustrator-color: #ff7c00;
        --lua-color: #2dd4bf; /* Teal */
        --html-color: #e34f26;
        --css-color: #1572b6;
        --js-color: #facc15; /* Yellow */

        /* Tag Colors (Refined with more contrast) */
        --tag-ui-bg: rgba(139, 92, 246, 0.15); --tag-ui-text: #c4b5fd; --tag-ui-border: rgba(139, 92, 246, 0.3);
        --tag-3d-bg: rgba(245, 121, 42, 0.15); --tag-3d-text: #fdba74; --tag-3d-border: rgba(245, 121, 42, 0.3);
        --tag-scripting-bg: rgba(45, 212, 191, 0.15); --tag-scripting-text: #99f6e4; --tag-scripting-border: rgba(45, 212, 191, 0.3);
        --tag-platform-bg: rgba(244, 63, 94, 0.15); --tag-platform-text: #fda4af; --tag-platform-border: rgba(244, 63, 94, 0.3);
        --tag-assets-bg: rgba(163, 230, 53, 0.15); --tag-assets-text: #d9f99d; --tag-assets-border: rgba(163, 230, 53, 0.3);
        --tag-modeling-bg: rgba(255, 176, 58, 0.15); --tag-modeling-text: #fcd34d; --tag-modeling-border: rgba(255, 176, 58, 0.3);
        --tag-web-bg: rgba(59, 130, 246, 0.15); --tag-web-text: #bfdbfe; --tag-web-border: rgba(59, 130, 246, 0.3);
        --tag-default-bg: rgba(71, 85, 105, 0.2); --tag-default-text: var(--text-secondary); --tag-default-border: rgba(71, 85, 105, 0.4);

        /* Transitions */
        --transition-fast: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        --transition-medium: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        --transition-slow: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      }

      /* --- Base Styles --- */
      html {
        scroll-behavior: smooth;
      }
      body {
        font-family: 'Inter', sans-serif;
        background-color: var(--bg-dark);
        color: var(--text-primary);
        overflow-x: hidden; /* Prevent horizontal scroll */
        /* Subtle geometric background pattern */
        background-image: linear-gradient(rgba(255, 255, 255, 0.02) 1px, transparent 1px), linear-gradient(90deg, rgba(255, 255, 255, 0.02) 1px, transparent 1px);
        background-size: 40px 40px;
      }
      body.modal-open {
        overflow: hidden;
      }

      /* --- Layout & Spacing --- */
      .section-padding {
        padding: 8rem 1rem; /* More vertical padding */
      }
      @media (min-width: 768px) {
        .section-padding { padding: 10rem 2rem; }
      }
      @media (min-width: 1024px) {
        .section-padding { padding: 12rem 2rem; }
      }
      .container-max {
        max-width: 80rem; /* Slightly wider max-width */
        margin-left: auto;
        margin-right: auto;
        padding-left: 1rem;
        padding-right: 1rem;
      }
       @media (min-width: 640px) { .container-max { padding-left: 1.5rem; padding-right: 1.5rem; } }
       @media (min-width: 1024px) { .container-max { padding-left: 2rem; padding-right: 2rem; } }


      /* --- Button Styles (Modern & Vibrant) --- */
      .btn-base {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
        font-size: 0.95rem; /* Slightly adjusted size */
        padding: 0.8rem 2rem; /* Balanced padding */
        border-radius: 9999px; /* Pill shape */
        transition: var(--transition-medium);
        color: var(--text-on-accent);
        border: 1px solid transparent;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
        cursor: pointer;
        text-decoration: none; /* Ensure links styled as buttons don't have underlines */
        position: relative; /* For potential pseudo-elements */
        overflow: hidden; /* For ripple/shine effects */
      }
      .btn-base:hover {
        transform: translateY(-3px) scale(1.03); /* More pronounced lift */
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
      }
      .btn-base:active {
         transform: translateY(-1px) scale(0.98);
         box-shadow: 0 2px 4px -1px rgba(0, 0, 0, 0.06), 0 1px 2px -1px rgba(0, 0, 0, 0.06);
      }
      .btn-base svg {
        width: 1.125rem; /* 18px */
        height: 1.125rem;
        margin-right: 0.75rem; /* 12px */
      }

      /* Primary Button (Violet -> Sky) */
      .btn-primary { background: linear-gradient(to right, var(--accent-start), var(--accent-end)); }
      .btn-primary:hover { background: linear-gradient(to right, var(--accent-hover-start), var(--accent-hover-end)); box-shadow: 0 0 25px 0px var(--accent-glow); }

      /* Secondary Button (Teal -> Lime) */
      .btn-secondary { background: linear-gradient(to right, var(--accent2-start), var(--accent2-end)); color: var(--bg-dark); /* Dark text for light gradient */ }
      .btn-secondary:hover { background: linear-gradient(to right, var(--accent2-hover-start), var(--accent2-hover-end)); box-shadow: 0 0 25px 0px var(--accent2-glow); }
      .btn-secondary svg { color: var(--bg-dark); } /* Ensure icon matches text */

      /* Tertiary Button (Neutral/Slate) */
      .btn-tertiary { background-color: var(--accent-neutral); }
      .btn-tertiary:hover { background-color: var(--accent-neutral-hover); box-shadow: 0 0 20px 0px var(--accent-neutral-glow); }

      /* Quaternary Button (Rose) */
      .btn-quaternary { background-color: var(--accent3); }
      .btn-quaternary:hover { background-color: var(--accent3-hover); box-shadow: 0 0 20px 0px var(--accent3-glow); }


      /* --- Hero Section Enhancements --- */
      #hero {
        position: relative;
        overflow: hidden;
        min-height: 100vh; /* Ensure it takes full viewport height */
        display: flex; /* Use flex for vertical centering */
        align-items: center;
        border-bottom: 1px solid var(--border-color);
        /* Add a subtle mesh gradient background */
        background-image: radial-gradient(at 20% 30%, hsla(257, 70%, 55%, 0.15) 0px, transparent 50%),
                          radial-gradient(at 80% 70%, hsla(197, 80%, 60%, 0.15) 0px, transparent 50%),
                          radial-gradient(at 50% 90%, hsla(160, 70%, 50%, 0.1) 0px, transparent 50%),
                          linear-gradient(rgba(255, 255, 255, 0.02) 1px, transparent 1px),
                          linear-gradient(90deg, rgba(255, 255, 255, 0.02) 1px, transparent 1px);
        background-size: 100% 100%, 100% 100%, 100% 100%, 40px 40px, 40px 40px;
        background-position: center center;
        background-color: var(--bg-dark); /* Fallback */
      }

      /* Animated Grid Background (Optional, more subtle) */
      /* #hero::before {
        content: '';
        position: absolute;
        inset: 0;
        background-image: linear-gradient(to right, rgba(255, 255, 255, 0.05) 1px, transparent 1px),
                          linear-gradient(to bottom, rgba(255, 255, 255, 0.05) 1px, transparent 1px);
        background-size: 50px 50px;
        mask-image: radial-gradient(ellipse at center, black 30%, transparent 70%);
        animation: panGrid 20s linear infinite;
        z-index: 0;
      }
      @keyframes panGrid {
        0% { background-position: 0% 0%; }
        100% { background-position: 100px 50px; }
      } */

      #hero .hero-content {
        position: relative; /* Ensure content is above pseudo-elements */
        z-index: 10;
      }

      #hero .hero-image-container {
        animation: float 6s ease-in-out infinite;
        position: relative; /* Needed for pseudo-element glow */
      }
      /* Add a glow behind the image */
      #hero .hero-image-container::after {
        content: '';
        position: absolute;
        inset: 10%; /* Adjust size of glow */
        background: radial-gradient(ellipse, var(--accent-start, #8b5cf6) 0%, transparent 70%);
        filter: blur(40px); /* Adjust blur intensity */
        opacity: 0.3; /* Adjust glow opacity */
        z-index: -1; /* Behind the image */
        animation: pulseGlow 6s infinite ease-in-out alternate;
        animation-delay: -3s; /* Offset pulse */
      }
      #hero .hero-image-container img {
        border-radius: 50%;
        border: 3px solid rgba(255, 255, 255, 0.1); /* Subtle border */
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        transition: var(--transition-medium);
      }
      #hero .hero-image-container img:hover {
        transform: scale(1.05);
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
      }

      @keyframes float {
        0% { transform: translateY(0px); }
        50% { transform: translateY(-20px); }
        100% { transform: translateY(0px); }
      }
      @keyframes pulseGlow {
         from { opacity: 0.2; transform: scale(0.95); }
         to { opacity: 0.4; transform: scale(1.05); }
      }

      /* Text Animations */
      #hero .hero-text-container h1 { animation: slideInUp 0.8s 0.2s ease-out forwards; opacity: 0; font-weight: 900; letter-spacing: -0.025em; }
      #hero .hero-text-container .subtitle { animation: slideInUp 0.8s 0.4s ease-out forwards; opacity: 0; }
      #hero .hero-text-container .description { animation: slideInUp 0.8s 0.6s ease-out forwards; opacity: 0; }
      #hero .hero-buttons { animation: fadeIn 1s 0.8s ease-out forwards; opacity: 0; }

      @keyframes slideInUp {
        from { transform: translateY(40px); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
      }
      @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }

      /* Gradient text for subtitle */
      .gradient-text {
        background: linear-gradient(to right, var(--accent-start), var(--accent-end));
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
      }

      /* --- Section Title Styling --- */
      .section-title {
        position: relative;
        display: inline-block;
        margin-bottom: 6rem; /* Increased space */
        font-weight: 800;
        letter-spacing: -0.02em;
        color: var(--text-primary);
      }
      /* Modern underline effect */
      .section-title::after {
        content: '';
        position: absolute;
        bottom: -15px; /* Position below */
        left: 50%;
        transform: translateX(-50%);
        width: 60px; /* Shorter */
        height: 5px; /* Thicker */
        background: linear-gradient(to right, var(--accent-start), var(--accent-end));
        border-radius: 3px;
        filter: blur(1px); /* Subtle blur */
        opacity: 0.8;
        transition: width 0.3s ease-out;
      }
       .section-title:hover::after {
          width: 90px; /* Expand on hover */
       }

      /* --- Skills Section Styling --- */
      .skill-category-title {
        font-size: 1.75rem; /* 28px */
        font-weight: 700;
        color: var(--text-primary);
        margin-bottom: 3rem;
        padding-bottom: 1rem;
        border-bottom: 1px solid var(--border-color);
        position: relative;
      }
      .skill-category-title::after {
        content: '';
        position: absolute;
        bottom: -1px;
        left: 0;
        width: 50px;
        height: 3px; /* Slightly thicker */
        background: linear-gradient(to right, var(--accent-start), var(--accent-end));
        border-radius: 1.5px;
      }

      /* Skill Item Card Style */
      .skill-item {
        background-color: var(--bg-medium);
        border: 1px solid var(--border-color);
        border-radius: 0.75rem; /* Rounded corners */
        padding: 1.5rem;
        margin-bottom: 1.5rem;
        opacity: 0;
        transform: translateY(20px);
        transition: opacity 0.5s ease-out, transform 0.5s ease-out, background-color 0.2s ease, border-color 0.2s ease;
        display: flex;
        align-items: flex-start;
        gap: 1rem; /* 16px */
      }
      .skill-item:hover {
        background-color: var(--bg-light);
        border-color: var(--accent-start);
        transform: translateY(15px) scale(1.02); /* Lift slightly more on hover */
      }
      .skill-item.is-visible {
        opacity: 1;
        transform: translateY(0);
      }
      .skill-item .skill-icon {
        flex-shrink: 0;
        margin-top: 0.125rem; /* Align icon */
        width: 1.75rem; /* 28px - Larger icon */
        height: 1.75rem;
        /* Icon color set via inline style */
        filter: drop-shadow(0 0 5px rgba(255, 255, 255, 0.1)); /* Subtle glow */
      }
      .skill-item .skill-details {
        flex-grow: 1;
      }
      .skill-item .skill-name {
        font-weight: 600;
        font-size: 1.125rem; /* 18px */
        color: var(--text-primary);
        margin-bottom: 0.375rem; /* 6px */
      }
      .skill-item .skill-description {
        font-size: 0.9375rem; /* 15px */
        color: var(--text-secondary);
        line-height: 1.65; /* Slightly more line height */
      }
      .skill-item:last-child { margin-bottom: 0; }


      /* --- Portfolio Showcase Display (Enhanced Glassmorphism) --- */
      #portfolio-showcase-display {
        background-color: var(--bg-light-translucent);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 1rem; /* More rounded */
        padding: 2rem;
        margin-bottom: 4rem; /* More space below showcase */
        display: grid;
        grid-template-columns: repeat(1, 1fr);
        gap: 1.5rem;
        opacity: 0;
        transform: scale(0.95) translateY(10px);
        transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        backdrop-filter: blur(16px) saturate(120%); /* Stronger blur, slight saturation */
        box-shadow: 0 12px 40px 0 rgba(0, 0, 0, 0.3); /* Deeper shadow */
        position: relative; /* For potential absolute elements inside */
      }
      #portfolio-showcase-display.is-visible {
        opacity: 1;
        transform: scale(1) translateY(0);
      }
      @media (min-width: 1024px) {
        #portfolio-showcase-display {
          grid-template-columns: repeat(5, 1fr);
          gap: 2.5rem; /* Increased gap */
          padding: 3rem; /* Increased padding */
        }
        #showcase-image-container { grid-column: span 2 / span 2; }
        #showcase-details { grid-column: span 3 / span 3; }
      }

      #showcase-image-container {
        position: relative;
        background-color: rgba(0,0,0,0.2); /* Darker image bg */
        border-radius: 0.75rem; /* Match parent rounding */
        overflow: hidden;
        border: 1px solid var(--border-color);
        min-height: 280px; /* Ensure minimum height */
        display: flex;
        align-items: center;
        justify-content: center;
        /* aspect-ratio: 16 / 10; /* Consider a slightly different aspect ratio */
      }

      #showcase-image {
        display: block;
        width: 100%;
        height: 100%;
        object-fit: cover;
        object-position: center;
        transition: opacity 0.4s ease-in-out, transform 0.4s ease-in-out; /* Added transform transition */
        cursor: zoom-in;
      }
       #showcase-image:hover {
          transform: scale(1.05); /* Subtle zoom on hover */
       }

      #showcase-details {
        display: flex;
        flex-direction: column;
      }
      #showcase-title {
        font-size: 2rem; /* Larger title */
        font-weight: 700;
        color: var(--text-primary);
        margin-bottom: 1rem;
        line-height: 1.3;
      }
      #showcase-description {
        color: var(--text-secondary);
        line-height: 1.7;
        margin-bottom: 2rem; /* More space before tags */
        font-size: 1rem;
        flex-grow: 1;
      }
      #showcase-tags {
        margin-bottom: 2rem; /* More space before link */
        display: flex;
        flex-wrap: wrap;
        gap: 0.75rem; /* 12px */
      }
      .portfolio-tag {
        font-size: 0.8rem; /* 13px */
        padding: 0.4rem 0.9rem;
        border-radius: 9999px; /* Pill shape */
        font-weight: 500;
        border: 1px solid; /* Border color set by type */
        transition: transform 0.2s ease, background-color 0.2s ease;
        cursor: default; /* Indicate they aren't clickable */
      }
      .portfolio-tag:hover {
        transform: translateY(-2px);
      }
      /* Apply specific tag colors using variables */
      .portfolio-tag[data-tag-type="ui"] { background-color: var(--tag-ui-bg); color: var(--tag-ui-text); border-color: var(--tag-ui-border); }
      .portfolio-tag[data-tag-type="3d"] { background-color: var(--tag-3d-bg); color: var(--tag-3d-text); border-color: var(--tag-3d-border); }
      .portfolio-tag[data-tag-type="scripting"] { background-color: var(--tag-scripting-bg); color: var(--tag-scripting-text); border-color: var(--tag-scripting-border); }
      .portfolio-tag[data-tag-type="platform"] { background-color: var(--tag-platform-bg); color: var(--tag-platform-text); border-color: var(--tag-platform-border); }
      .portfolio-tag[data-tag-type="assets"] { background-color: var(--tag-assets-bg); color: var(--tag-assets-text); border-color: var(--tag-assets-border); }
      .portfolio-tag[data-tag-type="modeling"] { background-color: var(--tag-modeling-bg); color: var(--tag-modeling-text); border-color: var(--tag-modeling-border); }
      .portfolio-tag[data-tag-type="web"] { background-color: var(--tag-web-bg); color: var(--tag-web-text); border-color: var(--tag-web-border); }
      .portfolio-tag[data-tag-type="default"] { background-color: var(--tag-default-bg); color: var(--tag-default-text); border-color: var(--tag-default-border); }

      #showcase-link {
        align-self: flex-start;
      }
      /* Style link icons */
      #showcase-link-icon-container svg {
        width: 1rem; /* 16px */
        height: 1rem;
        display: inline-block; /* Ensure proper alignment */
        vertical-align: middle;
      }

      /* Carousel Controls Styling */
      #showcase-counter {
        position: absolute;
        bottom: 1rem;
        left: 50%;
        transform: translateX(-50%);
        background-color: rgba(0,0,0,0.7);
        color: var(--text-secondary);
        padding: 0.3rem 0.8rem;
        border-radius: 9999px;
        font-size: 0.8125rem; /* 13px */
        z-index: 5;
        backdrop-filter: blur(5px);
        border: 1px solid rgba(255, 255, 255, 0.1);
      }
      .carousel-button {
        background-color: rgba(17, 24, 39, 0.6); /* Darker, less blue */
        color: var(--text-secondary);
        border: 1px solid rgba(55, 65, 81, 0.7); /* Match border color */
        padding: 0.8rem; /* Slightly larger */
        border-radius: 9999px;
        cursor: pointer;
        transition: var(--transition-fast);
        z-index: 10;
        backdrop-filter: blur(8px);
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
      }
      .carousel-button svg { width: 1.375rem; height: 1.375rem; } /* Larger icons */
      .carousel-button:hover:not(:disabled) {
        background-color: rgba(31, 41, 55, 0.8); /* Lighter bg on hover */
        color: var(--text-primary);
        border-color: rgba(71, 85, 105, 1);
        transform: translateY(-50%) scale(1.15); /* More scale */
      }
      .carousel-button:disabled {
        opacity: 0.4;
        cursor: not-allowed;
        transform: translateY(-50%) scale(1);
        background-color: rgba(17, 24, 39, 0.4);
        border-color: rgba(55, 65, 81, 0.5);
      }
      #showcase-prev { left: 1.5rem; } /* Position further out */
      #showcase-next { right: 1.5rem; }

      /* --- Portfolio Grid Item Styling --- */
      .portfolio-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 1.5rem; /* Increased gap */
      }
      @media (min-width: 640px) { .portfolio-grid { grid-template-columns: repeat(3, 1fr); } }
      @media (min-width: 768px) { .portfolio-grid { grid-template-columns: repeat(4, 1fr); gap: 1.75rem; } }
      @media (min-width: 1024px) { .portfolio-grid { grid-template-columns: repeat(5, 1fr); gap: 2rem; } }

      .portfolio-grid-item {
        border: 1px solid var(--border-color);
        border-radius: 0.75rem; /* Match showcase rounding */
        overflow: hidden;
        cursor: pointer;
        transition: border-color 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;
        background-color: var(--bg-medium);
        opacity: 0;
        transform: scale(0.9);
        position: relative; /* For potential overlays */
      }
      .portfolio-grid-item.is-visible {
        opacity: 1;
        transform: scale(1);
      }
      .portfolio-grid-item:hover {
        transform: scale(1.05) translateY(-5px); /* Lift and scale more */
        border-color: var(--accent-start);
        box-shadow: 0 10px 25px -5px rgba(139, 92, 246, 0.2); /* Accent shadow */
        z-index: 2; /* Bring to front on hover */
      }
      .portfolio-grid-item.active {
        border-color: var(--accent-end);
        box-shadow: 0 0 20px rgba(56, 189, 248, 0.3), 0 0 0 3px var(--accent-end); /* Brighter glow effect */
        transform: scale(1.03); /* Slightly scale active item */
        z-index: 1; /* Ensure active is above non-hovered */
      }
      .portfolio-grid-item .image-container {
        overflow: hidden; /* Keep image zoom contained */
        position: relative; /* For aspect ratio */
        padding-bottom: 56.25%; /* 16:9 Aspect Ratio */
        height: 0;
      }
      .portfolio-grid-item img {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
        transition: transform 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94); /* Smoother zoom */
      }
      .portfolio-grid-item:hover img {
        transform: scale(1.15); /* More zoom on hover */
      }
      .portfolio-item-title {
        padding: 1rem; /* More padding */
        text-align: center;
        font-weight: 500;
        font-size: 0.9rem; /* Slightly smaller */
        color: var(--text-secondary);
        background-color: var(--bg-light); /* Slightly lighter background for title */
        border-top: 1px solid var(--border-color);
        transition: color 0.3s ease, background-color 0.3s ease;
        white-space: nowrap; /* Prevent wrapping */
        overflow: hidden;
        text-overflow: ellipsis; /* Add ellipsis if too long */
      }
      .portfolio-grid-item.active .portfolio-item-title {
        color: var(--accent-end);
        font-weight: 600;
        background-color: rgba(56, 189, 248, 0.1); /* Subtle background tint */
      }
      .portfolio-grid-item:hover .portfolio-item-title {
        color: var(--text-primary);
      }


      /* --- SMP Section Styling --- */
      #smp-section .smp-container {
        background: linear-gradient(145deg, var(--bg-medium), var(--bg-light)); /* Subtle gradient */
        border: 1px solid var(--border-color);
        backdrop-filter: blur(10px); /* Slightly more blur */
        border-radius: 1rem; /* Match other rounding */
        padding: 3rem; /* More padding */
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
      }
       @media (min-width: 1024px) { #smp-section .smp-container { padding: 4rem; } }

      #smp-image-container {
         border-radius: 0.75rem; /* Rounded image container */
         overflow: hidden;
         box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
         border: 1px solid var(--border-color);
      }
      #smp-image {
        transition: opacity 0.8s ease-in-out; /* Slower, smoother fade */
        display: block; /* Remove extra space below image */
      }
      #smp-section .smp-content h3 {
        font-size: 2.25rem; /* Larger heading */
        font-weight: 700;
        margin-bottom: 1.25rem;
        color: var(--text-primary);
      }
      #smp-section .smp-content .subtitle {
        font-size: 1.25rem; /* Larger subtitle */
        color: var(--text-secondary);
        margin-bottom: 1.5rem;
        font-weight: 500;
      }
      #smp-section .smp-content .description {
        font-size: 1rem;
        color: var(--text-secondary);
        line-height: 1.7;
        margin-bottom: 2.5rem;
      }

      /* --- Scroll Animations --- */
      .animate-on-scroll {
        opacity: 0;
        transition: opacity 0.6s ease-out, transform 0.6s ease-out;
      }
      .animate-fade-in-up { transform: translateY(40px); }
      .animate-fade-in-left { transform: translateX(-40px); }
      .animate-fade-in-right { transform: translateX(40px); }
      .animate-zoom-in { transform: scale(0.9); }

      .animate-on-scroll.is-visible {
        opacity: 1;
        transform: translate(0, 0) scale(1);
      }

      /* --- Utility Classes --- */
      .aspect-w-16 { position: relative; padding-bottom: 56.25%; height: 0; }
      .aspect-h-9 > * { position: absolute; height: 100%; width: 100%; top: 0; right: 0; bottom: 0; left: 0; object-fit: cover; }

      /* --- Custom Scrollbar --- */
      .scrollbar-styled { scrollbar-width: thin; scrollbar-color: var(--accent-neutral) var(--bg-dark); }
      .scrollbar-styled::-webkit-scrollbar { width: 10px; height: 10px; }
      .scrollbar-styled::-webkit-scrollbar-track { background: var(--bg-dark); border-radius: 5px; }
      .scrollbar-styled::-webkit-scrollbar-thumb { background-color: var(--accent-neutral); border-radius: 5px; border: 2px solid var(--bg-dark); }
      .scrollbar-styled::-webkit-scrollbar-thumb:hover { background-color: var(--accent-neutral-hover); }

      /* --- Error Message Styling --- */
      #style-error-message { display: none; } /* Keep hidden by default */

      /* --- Image Modal Styles --- */
      #image-modal {
        transition: opacity 0.3s ease-in-out;
        background-color: rgba(10, 10, 10, 0.9); /* Darker, less transparent */
        backdrop-filter: blur(12px) saturate(100%); /* Increased blur */
      }
      #image-modal .modal-content-wrapper {
        position: relative; /* Container for image and buttons */
        max-width: 90vw; /* Limit width */
        max-height: 90vh; /* Limit height */
        display: flex; /* Allow image to determine height */
        align-items: center;
        justify-content: center;
      }
      #image-modal img {
        display: block;
        max-width: 100%; /* Image won't exceed wrapper */
        max-height: 85vh; /* Limit image height within wrapper */
        object-fit: contain;
        border-radius: 0.75rem; /* Match other rounding */
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4); /* Enhanced shadow */
        transition: opacity 0.3s ease-in-out; /* Fade image transitions */
      }
      #image-modal-close {
        transition: color 0.2s ease, transform 0.2s ease, background-color 0.2s ease;
        color: var(--text-secondary);
        background-color: rgba(31, 41, 55, 0.7); /* Match light bg */
        border-radius: 9999px;
        padding: 0.6rem; /* Adjusted padding */
        border: 1px solid var(--border-color);
        backdrop-filter: blur(5px);
        position: absolute;
        top: 1rem;
        right: 1rem;
        z-index: 20; /* Ensure above nav buttons */
      }
      #image-modal-close:hover {
        color: var(--text-primary);
        transform: scale(1.15) rotate(90deg); /* More rotation */
        background-color: rgba(55, 65, 81, 0.9);
      }
      #image-modal-close svg {
        width: 1.5rem; /* 24px */
        height: 1.5rem;
      }
      /* Modal Nav Buttons */
      .modal-nav-button {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        z-index: 15; /* Below close, above image */
        background-color: rgba(17, 24, 39, 0.6);
        color: var(--text-secondary);
        border: 1px solid rgba(55, 65, 81, 0.7);
        padding: 1rem; /* Larger click area */
        border-radius: 9999px;
        cursor: pointer;
        transition: var(--transition-fast);
        backdrop-filter: blur(8px);
      }
      .modal-nav-button svg { width: 1.5rem; height: 1.5rem; }
      .modal-nav-button:hover:not(:disabled) {
        background-color: rgba(31, 41, 55, 0.8);
        color: var(--text-primary);
        border-color: rgba(71, 85, 105, 1);
        transform: translateY(-50%) scale(1.1);
      }
      .modal-nav-button:disabled {
        opacity: 0.4;
        cursor: not-allowed;
        transform: translateY(-50%) scale(1);
      }
      #modal-prev { left: 1rem; }
      #modal-next { right: 1rem; }
      @media (min-width: 768px) {
          #modal-prev { left: 2rem; }
          #modal-next { right: 2rem; }
      }

      /* --- Footer --- */
      footer {
        border-top: 1px solid var(--border-color);
        margin-top: 8rem; /* More space above footer */
        padding-top: 3rem;
        padding-bottom: 3rem;
        color: var(--text-tertiary); /* Darker gray for footer */
        background-color: var(--bg-dark); /* Ensure dark background */
        font-size: 0.9rem;
      }
      footer p {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
      }
      footer .heart-icon {
        color: var(--accent3); /* Use Rose color */
        display: inline-block;
        animation: pulseHeart 1.5s infinite ease-in-out;
      }
      @keyframes pulseHeart {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.2); }
      }

    </style>
</head>
<body class="scrollbar-styled">

    <div id="style-error-message" class="fixed top-0 left-0 w-full bg-red-600 text-white text-center p-4 font-bold z-[10000]">
        Error: Styles did not load correctly. Please check the browser console (F12) for network errors or script issues.
    </div>

    <section id="hero" class="section-padding">
        <div class="container-max hero-content">
            <div class="grid grid-cols-1 md:grid-cols-2 items-center gap-12 md:gap-20">
                <div class="text-center md:text-left hero-text-container">
                    <h1 class="text-5xl sm:text-6xl lg:text-7xl font-extrabold text-white mb-5">
                        Blazinik
                    </h1>
                    <p class="subtitle text-3xl gradient-text font-semibold mb-6">
                        Hey, I'm Blaze üëã
                    </p>
                    <p class="description text-xl text-slate-300 mb-10">
                        Creative Programmer & Designer specializing in immersive experiences and intuitive interfaces.
                    </p>
                    <div class="flex flex-wrap justify-center md:justify-start gap-4 hero-buttons">
                        <a href="#portfolio" onclick="document.getElementById('portfolio').scrollIntoView({behavior:'smooth'}); return false;" class="btn-base btn-primary">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="7" height="9" x="3" y="3" rx="1"/><rect width="7" height="5" x="14" y="3" rx="1"/><rect width="7" height="9" x="14" y="12" rx="1"/><rect width="7" height="5" x="3" y="16" rx="1"/></svg>
                            View Portfolio
                        </a>
                        <a href="https://music.youtube.com/playlist?list=PLcYrqWxUJIZNjQLBnOzUoAWFidx--usLN&si=Q3W046jgYBTOPxR2" target="_blank" rel="noopener noreferrer" class="btn-base btn-secondary">
                             <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg>
                            Favorite Music
                        </a>
                        <a href="https://steamcommunity.com/profiles/76561199821469314/" target="_blank" rel="noopener noreferrer" class="btn-base btn-tertiary">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 12c-1 0-3 1-3 3v5h6v-5c0-2-2-3-3-3Z"/><path d="M12 12c1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3 1.34 3 3 3Z"/><circle cx="12" cy="12" r="10"/></svg>
                            Steam
                        </a>
                        <a href="https://www.youtube.com/@1.blazeIT" target="_blank" rel="noopener noreferrer" class="btn-base btn-quaternary">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17"/><path d="m10 15 5-3-5-3z"/></svg>
                            YouTube
                        </a>
                    </div>
                </div>
                <div class="flex justify-center hero-image-container">
                    <div class="relative w-64 h-64 md:w-80 md:h-80 lg:w-96 lg:h-96">
                        <img src="images/DenoLogo3D-Anim.gif" alt="Blazinik Animated Logo" class="w-full h-full object-cover" onerror="this.onerror=null; this.src='https://placehold.co/384x384/1f2937/9ca3af?text=Logo';">
                    </div>
                </div>
            </div>
        </div>
    </section>

    <main>
        <section id="skills" class="section-padding border-b border-[var(--border-color)]">
            <div class="container-max relative z-10">
                <h2 class="section-title text-4xl md:text-5xl text-center">My Expertise</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-x-12 lg:gap-x-20 gap-y-8">
                    <div>
                        <h3 class="skill-category-title">Design & 3D</h3>
                        <div class="space-y-6"> <div class="skill-item animate-on-scroll animate-fade-in-up" style="transition-delay: 0.1s;">
                                <span class="skill-icon" style="color: var(--blender-color);">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M14.19 2.45c-.35-.11-.73-.11-1.08 0l-6.9 2.19C5.47 5.24 5 6.05 5 6.91v10.18c0 .86.47 1.67 1.21 2.07l6.9 3.63c.36.19.78.19 1.14 0l6.9-3.63c.74-.4 1.21-1.21 1.21-2.07V6.91c0-.86-.47-1.67-1.21-2.07l-6.9-2.19zm-1.8 15.42l-4.3-2.26v-5.09l4.3 2.26v5.09zm0-6.21l-4.3-2.26 4.3-2.26 4.3 2.26-4.3 2.26zm5.45 4.05l-4.3 2.26v-5.09l4.3-2.26v5.09z"/></svg>
                                </span>
                                <div class="skill-details">
                                    <p class="skill-name">Blender</p>
                                    <p class="skill-description">Proficient in 3D modeling, sculpting, texturing, and rendering. Creating optimized assets for games and detailed models for visualization.</p>
                                </div>
                            </div>
                            <div class="skill-item animate-on-scroll animate-fade-in-up" style="transition-delay: 0.2s;">
                                <span class="skill-icon" style="color: var(--photoshop-color);">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z"/></svg>
                                </span>
                                <div class="skill-details">
                                    <p class="skill-name">Photoshop</p>
                                    <p class="skill-description">Skilled in texture painting, UI element design, digital illustration, and photo manipulation for diverse creative projects.</p>
                                </div>
                            </div>
                            <div class="skill-item animate-on-scroll animate-fade-in-up" style="transition-delay: 0.3s;">
                                <span class="skill-icon" style="color: var(--illustrator-color);">
                                     <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="m12 19 7-7 3 3-7 7-3-3z"/><path d="m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/><path d="m2 2 7.586 7.586"/><circle cx="11" cy="11" r="2"/></svg>
                                </span>
                                <div class="skill-details">
                                    <p class="skill-name">Illustrator</p>
                                    <p class="skill-description">Creating crisp vector graphics, logos, icons, and scalable UI assets with precision and attention to detail.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <h3 class="skill-category-title">Programming & Web</h3>
                        <div class="space-y-6">
                            <div class="skill-item animate-on-scroll animate-fade-in-up" style="transition-delay: 0.4s;">
                                <span class="skill-icon" style="color: var(--lua-color);">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-2-11.5c0-.83.67-1.5 1.5-1.5h1c.83 0 1.5.67 1.5 1.5v4c0 .83-.67 1.5-1.5 1.5h-1c-.83 0-1.5-.67-1.5-1.5v-4zm1.5 5.5h1V16h-1v-1.5z"/></svg> </span>
                                <div class="skill-details">
                                    <p class="skill-name">Lua</p>
                                    <p class="skill-description">Extensive experience scripting complex game mechanics, UI systems, and backend logic within the Roblox platform.</p>
                                </div>
                            </div>
                            <div class="skill-item animate-on-scroll animate-fade-in-up" style="transition-delay: 0.5s;">
                                <span class="skill-icon" style="color: var(--html-color);">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="m18 16 4-4-4-4"/><path d="m6 8-4 4 4 4"/><path d="m14.5 4-5 16"/></svg>
                                </span>
                                <div class="skill-details">
                                    <p class="skill-name">HTML</p>
                                    <p class="skill-description">Building semantic, accessible, and well-structured web content as the foundation for modern web applications.</p>
                                </div>
                            </div>
                            <div class="skill-item animate-on-scroll animate-fade-in-up" style="transition-delay: 0.6s;">
                                <span class="skill-icon" style="color: var(--css-color);">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 3h20v2H2zm0 4h20v2H2zm0 4h20v2H2zm0 4h20v2H2zm0 4h20v2H2z"/></svg> </span>
                                <div class="skill-details">
                                    <p class="skill-name">CSS & Tailwind</p>
                                    <p class="skill-description">Crafting responsive, visually appealing layouts and interfaces using modern CSS techniques and the Tailwind CSS framework.</p>
                                </div>
                            </div>
                            <div class="skill-item animate-on-scroll animate-fade-in-up" style="transition-delay: 0.7s;">
                                <span class="skill-icon" style="color: var(--js-color);">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M13 2L3 14h9l-1 8 11-12h-9z"/></svg> </span>
                                <div class="skill-details">
                                    <p class="skill-name">JavaScript</p>
                                    <p class="skill-description">Implementing front-end interactivity, dynamic content updates, and enhancing user experiences with core JavaScript and modern practices.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="portfolio" class="section-padding border-b border-[var(--border-color)]">
            <div class="container-max relative z-10">
                <h2 class="section-title text-4xl md:text-5xl text-center">Project Showcase</h2>

                <div id="portfolio-showcase-display" class="animate-on-scroll animate-zoom-in">
                    <div id="showcase-image-container">
                        <img id="showcase-image" src="https://placehold.co/600x400/111827/9ca3af?text=Loading..." alt="Project Image" onerror="this.onerror=null; this.src='https://placehold.co/600x400/111827/9ca3af?text=Error';" aria-label="Click to enlarge image">
                        <button id="showcase-prev" class="carousel-button prev" aria-label="Previous image">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
                        </button>
                        <button id="showcase-next" class="carousel-button next" aria-label="Next image">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
                        </button>
                        <div id="showcase-counter">1 / X</div>
                    </div>
                    <div id="showcase-details">
                        <h3 id="showcase-title" class="text-white">Loading Project...</h3>
                        <p id="showcase-description" class="text-gray-400">Loading description...</p>
                        <div id="showcase-tags" class="mb-6 flex flex-wrap gap-2"></div>
                        <a id="showcase-link" href="#" target="_blank" rel="noopener noreferrer" class="btn-base btn-primary hidden">
                            <span id="showcase-link-icon-container" class="mr-2 inline-block">
                                <svg class="w-4 h-4 icon-play" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M6 3l14 9-14 9V3z"/></svg>
                                <svg class="w-4 h-4 icon-link hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>
                            </span>
                            <span id="showcase-link-text">View Project</span>
                        </a>
                    </div>
                </div>

                <div class="portfolio-grid mt-16">
                    </div>
            </div>
        </section>

        <section id="smp-section" class="section-padding">
            <div class="container-max relative z-10">
                <h2 class="section-title text-4xl md:text-5xl text-center">Join the Community</h2>
                <div class="smp-container">
                    <div class="flex flex-col lg:flex-row items-center gap-10 lg:gap-16">
                         <div class="w-full lg:w-1/2 xl:w-2/5 flex-shrink-0 animate-on-scroll animate-fade-in-left" id="smp-image-container">
                            <img id="smp-image" src="images/smp1.png" alt="Extreme Juicers SMP Screenshot" class="w-full h-auto object-cover bg-gray-800 rounded-lg" onerror="this.onerror=null; this.src='https://placehold.co/800x450/111827/9ca3af?text=Error';">
                        </div>
                        <div class="w-full lg:w-1/2 xl:w-3/5 text-center lg:text-left animate-on-scroll animate-fade-in-right smp-content" style="transition-delay: 0.2s;">
                            <h3>Extreme Juicers SMP</h3>
                            <p class="subtitle">Become part of an awesome, mature, apply-to-join SMP server!</p>
                            <p class="description">We pride ourselves on our fantastic community. If you're seeking a great place to build, collaborate, and have fun, look no further. Applications are reviewed carefully to maintain our positive atmosphere.</p>
                            <a href="https://discord.gg/6AhfhTYnqv" target="_blank" rel="noopener noreferrer" class="btn-base btn-primary">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22a10 10 0 1 1 0-20 10 10 0 0 1 0 20Zm-5-5 1.5-1.5a6 6 0 0 1 7 0L17 17m-10-4a2 2 0 1 0 4 0 2 2 0 0 0-4 0Zm10 0a2 2 0 1 0 4 0 2 2 0 0 0-4 0Z"/></svg> Apply via Discord
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="text-center">
        <div class="container-max">
             <p>Crafted with <span class="heart-icon">‚ù§Ô∏è</span> by Blazinik</p>
        </div>
    </footer>

    <div id="image-modal" class="fixed inset-0 flex items-center justify-center p-4 z-[5000] hidden opacity-0" role="dialog" aria-modal="true" aria-labelledby="modal-image">
        <div class="modal-content-wrapper">
             <img id="modal-image" src="" alt="Enlarged project image" class="">
            <button id="modal-prev" aria-label="Previous image" class="modal-nav-button">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
            </button>
            <button id="modal-next" aria-label="Next image" class="modal-nav-button">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
            </button>
        </div>
         <button id="image-modal-close" aria-label="Close image viewer">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
        </button>
    </div>


    <script>
        // Wrap entire script in DOMContentLoaded to ensure HTML is ready
        document.addEventListener('DOMContentLoaded', () => {
            console.log("[Debug] DOM fully loaded and parsed.");

            // Get reference to the error message div early
            const styleErrorMessage = document.getElementById('style-error-message');

            try {
                // --- Get Static Elements ---
                console.log("[Debug] Getting static elements...");
                const portfolioGridContainer = document.querySelector('#portfolio .portfolio-grid'); // Updated selector
                const showcaseDisplayElement = document.getElementById('portfolio-showcase-display');
                const showcasePrevBtn = document.getElementById('showcase-prev');
                const showcaseNextBtn = document.getElementById('showcase-next');
                const smpImageElement = document.getElementById('smp-image');
                const smpSection = document.getElementById('smp-section'); // For hover pause
                const showcaseImageElement = document.getElementById('showcase-image');
                const showcaseTitleElement = document.getElementById('showcase-title');
                const showcaseDescElement = document.getElementById('showcase-description');
                const showcaseTagsElement = document.getElementById('showcase-tags');
                const showcaseLinkElement = document.getElementById('showcase-link');
                const showcaseLinkTextElement = document.getElementById('showcase-link-text');
                const showcaseLinkIconContainerElement = document.getElementById('showcase-link-icon-container');
                const showcaseCounterElement = document.getElementById('showcase-counter');
                const imageModal = document.getElementById('image-modal');
                const modalImage = document.getElementById('modal-image');
                const modalCloseBtn = document.getElementById('image-modal-close');
                const modalPrevBtn = document.getElementById('modal-prev');
                const modalNextBtn = document.getElementById('modal-next');

                // --- Check Essential Static Elements ---
                // (Add checks for newly added or critical elements)
                if (!portfolioGridContainer) console.error('[Debug] Portfolio grid container not found!');
                if (!showcaseDisplayElement) console.error('[Debug] Showcase display element not found!');
                // ... (keep other checks)
                if (!imageModal) console.error('[Debug] imageModal not found!');
                if (!modalImage) console.error('[Debug] modalImage not found!');
                if (!modalCloseBtn) console.error('[Debug] modalCloseBtn not found!');
                if (!modalPrevBtn) console.error('[Debug] modalPrevBtn not found!');
                if (!modalNextBtn) console.error('[Debug] modalNextBtn not found!');


                // --- Project Data (Using original relative paths) ---
                // IMPORTANT: Ensure these image paths are correct relative to your HTML file.
                const projects = [
                   {
                      title: "Stargate: Horizon",
                      images: [ "images/pS1.png", "images/pS2.jpeg", "images/pS3.png" ],
                      description: "A science-fiction project involving complex scripting, detailed UI design, and 3D asset creation within the Roblox platform. Focused on creating an immersive experience based on the Stargate franchise.",
                      link: "https://www.roblox.com/games/3901984129/Stargate-Horizons",
                      linkType: "roblox", // 'roblox', 'web', 'game', 'other'
                      tags: ["UI Design", "3D Art", "Scripting", "Roblox"],
                      thumbnail: "images/pS1.png" // Use first image as thumbnail
                    },
                    {
                      title: "Project Franklin",
                      images: [ "images/pR1.png", "images/pR2.png", "images/pR3.png", "images/pR4.png" ],
                      description: "A personal project recreating Franklin's house from GTA V in Blender and importing it into Roblox Studio. This was a modeling and texturing exercise released for free to the community.",
                      link: "#", // No direct link available
                      linkType: "other",
                      tags: ["Assets", "Modeling", "3D Design", "Blender", "Roblox Studio"],
                      thumbnail: "images/pR1.png"
                    },
                    {
                      title: "Project Space",
                      images: [ "images/gsp1.png", "images/gsp2.jpeg", "images/gsp3.jpeg", "images/gsp4.png", "images/gsp5.png" ],
                      description: "Project Space was a true passion project where I poured countless hours into development. As the creator of the Grant Space Program, I focused on building immersive environments, engaging mission systems, and a strong sense of community. This project helped me grow immensely as a developer‚Äîespecially in environmental design and scripting.",
                      link: "#", // No direct link available
                      linkType: "other",
                      tags: ["UI Design", "Assets", "Modeling", "Scripting", "3D Design", "Blender", "Roblox Studio"],
                      thumbnail: "images/gsp1.png"
                    },
                    // Add more projects here if needed
                     {
                      title: "Sample Web Project", // Example
                      images: [ "https://placehold.co/800x500/8b5cf6/ffffff?text=Web+Screenshot+1", "https://placehold.co/800x500/38bdf8/ffffff?text=Web+Screenshot+2" ],
                      description: "A conceptual website design focusing on modern UI trends, smooth animations, and responsive layout using HTML, CSS (Tailwind), and JavaScript.",
                      link: "#", // Link to live demo or repo
                      linkType: "web",
                      tags: ["Web Design", "HTML", "CSS", "Tailwind", "JavaScript", "UI/UX"],
                      thumbnail: "https://placehold.co/400x225/8b5cf6/ffffff?text=Web+Thumb"
                    },
                     {
                      title: "Another 3D Model", // Example
                      images: [ "https://placehold.co/800x500/f5792a/ffffff?text=Model+View+1", "https://placehold.co/800x500/ff7c00/ffffff?text=Model+View+2", "https://placehold.co/800x500/facc15/0a0a0a?text=Model+Wireframe" ],
                      description: "Detailed 3D model created in Blender, textured in Substance Painter (hypothetically), and rendered using Cycles. Focus on realistic materials and topology.",
                      link: "#", // Link to ArtStation or Sketchfab
                      linkType: "other",
                      tags: ["3D Modeling", "Blender", "Texturing", "Rendering", "Assets"],
                      thumbnail: "https://placehold.co/400x225/f5792a/ffffff?text=3D+Thumb"
                    }
                ];
                let currentProjectIndex = 0;
                let currentShowcaseImageIndex = 0; // Renamed for clarity
                let modalImageSources = [];
                let currentModalImageIndex = 0;
                console.log("[Debug] Projects data defined:", projects);

                // --- Populate Portfolio Grid ---
                function populateGrid() {
                    if (!portfolioGridContainer) { console.error("[Debug] Cannot populate grid, container not found."); return; }
                    console.log("[Debug] Populating portfolio grid...");
                    portfolioGridContainer.innerHTML = ''; // Clear existing items

                    projects.forEach((project, index) => {
                        const gridItem = document.createElement('div');
                        gridItem.className = 'portfolio-grid-item animate-on-scroll animate-zoom-in';
                        gridItem.style.transitionDelay = `${index * 0.07}s`; // Slightly adjusted stagger
                        gridItem.dataset.projectIndex = index;

                        // Image container
                        const imgContainer = document.createElement('div');
                        imgContainer.className = 'image-container'; // Use class for aspect ratio styling

                        const img = document.createElement('img');
                        img.src = project.thumbnail || (project.images && project.images.length > 0 ? project.images[0] : 'https://placehold.co/400x225/1f2937/6b7280?text=No+Thumb'); // Use first image if no thumbnail
                        img.alt = `${project.title} Thumbnail`;
                        img.loading = 'lazy'; // Add lazy loading
                        img.onerror = (e) => {
                            console.warn(`[Debug] Thumbnail failed to load for "${project.title}": ${e.target.src}`);
                            e.target.src='https://placehold.co/400x225/1f2937/6b7280?text=Error';
                        };

                        const titleDiv = document.createElement('div');
                        titleDiv.className = 'portfolio-item-title';
                        titleDiv.textContent = project.title;

                        imgContainer.appendChild(img);
                        gridItem.appendChild(imgContainer);
                        gridItem.appendChild(titleDiv);

                        gridItem.addEventListener('click', () => {
                            console.log(`[Debug] Grid item ${index} clicked. Calling displayProjectDetails.`);
                            if (typeof displayProjectDetails === 'function') {
                                displayProjectDetails(index);
                                // Scroll the showcase display into view smoothly
                                if (showcaseDisplayElement) {
                                    showcaseDisplayElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
                                }
                            } else {
                                console.error("[Debug] displayProjectDetails function is not defined when grid item clicked!");
                            }
                        });

                        portfolioGridContainer.appendChild(gridItem);
                    });
                    console.log("[Debug] Portfolio grid populated.");

                    // Make sure the newly added grid items are observed for animation
                    portfolioGridContainer.querySelectorAll('.animate-on-scroll').forEach(el => {
                        if (observer) {
                            observer.observe(el);
                        } else {
                            console.warn("[Debug] Observer not ready when trying to observe grid items. Making visible manually.");
                            el.classList.add('is-visible'); // Fallback
                        }
                    });
                }

                // --- Display Project Details Logic ---
                function displayProjectDetails(index) {
                    console.log(`[Debug] Displaying project index: ${index}`);
                    if (index < 0 || index >= projects.length || !projects[index]) {
                        console.error(`[Debug] Invalid project index or missing project data: ${index}`);
                        // Display error state (implement proper UI feedback)
                        if(showcaseTitleElement) showcaseTitleElement.textContent = "Error Loading Project";
                        // ... (rest of error handling)
                        return;
                    }
                    const project = projects[index];
                    currentProjectIndex = index;
                    currentShowcaseImageIndex = 0; // Reset image index for showcase

                    if (!showcaseTitleElement || !showcaseDescElement || !showcaseTagsElement || !showcaseLinkElement || !showcaseLinkTextElement || !showcaseLinkIconContainerElement) {
                        console.error("[Debug] One or more showcase detail elements missing inside displayProjectDetails!");
                        return;
                    }

                    // Fade out details before updating
                    if (showcaseDisplayElement) showcaseDisplayElement.style.opacity = '0';

                    setTimeout(() => {
                        showcaseTitleElement.textContent = project.title;
                        showcaseDescElement.textContent = project.description;

                        // Update tags
                        showcaseTagsElement.innerHTML = '';
                        project.tags.forEach(tagText => {
                            const tag = tagText.trim();
                            const t = document.createElement('span');
                            t.textContent = tag;
                            t.className = 'portfolio-tag';

                            const lowerTag = tag.toLowerCase();
                            let tagType = 'default';
                            if (lowerTag.includes('ui') || lowerTag.includes('ux') || lowerTag.includes('design') && !lowerTag.includes('3d')) tagType = 'ui';
                            else if (lowerTag.includes('3d') || lowerTag.includes('blender')) tagType = '3d';
                            else if (lowerTag.includes('model')) tagType = 'modeling';
                            else if (lowerTag.includes('script') || lowerTag.includes('lua') || lowerTag.includes('javascript') || lowerTag.includes('programming')) tagType = 'scripting';
                            else if (lowerTag.includes('roblox') || lowerTag.includes('platform')) tagType = 'platform';
                            else if (lowerTag.includes('asset')) tagType = 'assets';
                            else if (lowerTag.includes('html') || lowerTag.includes('css') || lowerTag.includes('web') || lowerTag.includes('tailwind')) tagType = 'web';

                            t.dataset.tagType = tagType;
                            showcaseTagsElement.appendChild(t);
                        });

                         // Update link button
                        const playIcon = showcaseLinkIconContainerElement?.querySelector('.icon-play');
                        const linkIcon = showcaseLinkIconContainerElement?.querySelector('.icon-link');

                        if (project.link && project.link !== '#') {
                            showcaseLinkElement.href = project.link;
                            showcaseLinkElement.classList.remove('hidden');
                            if (playIcon && linkIcon) {
                                if (project.linkType === 'roblox' || project.linkType === 'game') {
                                    playIcon.classList.remove('hidden');
                                    linkIcon.classList.add('hidden');
                                    showcaseLinkTextElement.textContent = "Play Game";
                                } else if (project.linkType === 'web') {
                                    playIcon.classList.add('hidden');
                                    linkIcon.classList.remove('hidden');
                                    showcaseLinkTextElement.textContent = "Visit Website";
                                } else { // Default to generic link
                                    playIcon.classList.add('hidden');
                                    linkIcon.classList.remove('hidden');
                                    showcaseLinkTextElement.textContent = "View Link";
                                }
                            } else {
                                console.warn("[Debug] Showcase link icon elements missing.");
                                showcaseLinkTextElement.textContent = "View Link";
                            }
                        } else {
                            showcaseLinkElement.classList.add('hidden');
                        }

                        // Display the first image of the selected project in the showcase
                        if (typeof displayShowcaseImage === 'function') {
                            console.log("[Debug] Calling displayShowcaseImage(0) for new project.");
                            displayShowcaseImage(0); // Display the first image (index 0)
                        } else {
                            console.error("[Debug] displayShowcaseImage function is not defined when changing project.");
                        }

                         // Update Active Thumbnail State in the grid
                        if (portfolioGridContainer) {
                            const gridItems = portfolioGridContainer.querySelectorAll('.portfolio-grid-item');
                            gridItems.forEach((item, i) => {
                                item.classList.toggle('active', i === currentProjectIndex);
                            });
                        } else {
                            console.warn("[Debug] Portfolio grid container not found for updating active state.");
                        }

                         // Fade details back in
                        if (showcaseDisplayElement) showcaseDisplayElement.style.opacity = '1';
                        console.log(`[Debug] Finished displaying project index: ${index}`);

                    }, 300); // Delay matches transition duration
                }

                // --- Display Specific Showcase Image Logic ---
                function displayShowcaseImage(imgIndex) {
                    console.log(`[Debug] Attempting display showcase image index: ${imgIndex} for project index: ${currentProjectIndex}`);
                    const project = projects[currentProjectIndex];

                    if (!showcaseImageElement || !showcaseCounterElement || !showcasePrevBtn || !showcaseNextBtn) {
                        console.error("[Debug] Showcase image/nav elements missing inside displayShowcaseImage!");
                        return;
                    }
                    if (!project || !project.images || project.images.length === 0) {
                        console.error(`[Debug] No project data or images for project index: ${currentProjectIndex}`);
                        showcaseImageElement.style.opacity = '1'; // Ensure visible
                        showcaseImageElement.src = 'https://placehold.co/600x400/1f2937/ef4444?text=No+Images';
                        showcaseCounterElement.style.display = 'none';
                        showcasePrevBtn.style.display = 'none';
                        showcaseNextBtn.style.display = 'none';
                        return;
                    }
                    if (imgIndex < 0 || imgIndex >= project.images.length) {
                        console.error(`[Debug] Invalid image index (${imgIndex}) for project with ${project.images.length} images.`);
                        return;
                    }

                    currentShowcaseImageIndex = imgIndex;
                    const imageUrl = project.images[currentShowcaseImageIndex];
                    console.log(`[Debug] Setting showcase image src to: ${imageUrl}`);

                    // Fade out current image
                    showcaseImageElement.style.opacity = '0';

                    // Preload the target image before setting src
                    const tempImg = new Image();
                    tempImg.onload = () => {
                         // Set src and fade in ONLY after image is loaded
                        showcaseImageElement.src = imageUrl;
                        showcaseImageElement.alt = `${project.title} - Image ${currentShowcaseImageIndex + 1}`;
                        showcaseImageElement.style.opacity = '1'; // Fade in
                        showcaseImageElement.onerror = null; // Clear previous error handler
                         console.log(`[Debug] Showcase image loaded successfully: ${imageUrl}`);
                    };
                    tempImg.onerror = () => {
                         console.error(`[Debug] Showcase Image failed to load: ${imageUrl}`);
                         showcaseImageElement.src = 'https://placehold.co/600x400/1f2937/9ca3af?text=Load+Error';
                         showcaseImageElement.style.opacity = '1'; // Fade in placeholder
                    };
                    tempImg.src = imageUrl; // Start loading

                    // Update counter and button states
                    const numImages = project.images.length;
                    if (showcaseCounterElement) {
                        showcaseCounterElement.textContent = `${currentShowcaseImageIndex + 1} / ${numImages}`;
                    }
                    if (showcasePrevBtn) {
                        showcasePrevBtn.disabled = currentShowcaseImageIndex === 0;
                    }
                    if (showcaseNextBtn) {
                        showcaseNextBtn.disabled = currentShowcaseImageIndex === numImages - 1;
                    }

                    const showControls = numImages > 1;
                    if (showcasePrevBtn) showcasePrevBtn.style.display = showControls ? 'block' : 'none';
                    if (showcaseNextBtn) showcaseNextBtn.style.display = showControls ? 'block' : 'none';
                    if (showcaseCounterElement) showcaseCounterElement.style.display = showControls ? 'block' : 'none';
                }


                // --- Intersection Observer Setup for Scroll Animations ---
                console.log("[Debug] Setting up Intersection Observer...");
                let observer;
                try {
                    observer = new IntersectionObserver((entries, obs) => {
                        entries.forEach(entry => {
                            const target = entry.target;
                            try {
                                if (entry.isIntersecting) {
                                    target.classList.add('is-visible');
                                    obs.unobserve(target);
                                }
                            } catch (callbackError) {
                                console.error("[Debug] Error inside IntersectionObserver callback:", callbackError, "on target:", target);
                            }
                        });
                    }, { threshold: 0.15, rootMargin: "0px 0px -50px 0px" }); // Trigger slightly before fully in view

                    document.querySelectorAll('.animate-on-scroll').forEach(el => {
                        // Exclude grid items initially
                        if (!el.closest('#portfolio .portfolio-grid')) {
                            observer.observe(el);
                        }
                         // Observe the showcase display separately
                         if (el.id === 'portfolio-showcase-display') {
                             observer.observe(el);
                         }
                    });
                    console.log("[Debug] Intersection Observer setup complete.");

                } catch (e) {
                    console.error("[Debug] Failed to initialize IntersectionObserver:", e);
                    console.warn("[Debug] IntersectionObserver failed. Applying fallback visibility.");
                    document.querySelectorAll('.animate-on-scroll').forEach(el => {
                        el.classList.add('is-visible');
                    });
                    // Display error message (optional)
                }


                // --- Event Listeners ---

                // Showcase Carousel Buttons
                if (showcasePrevBtn) {
                    showcasePrevBtn.addEventListener('click', () => {
                        console.log("[Debug] Showcase Prev Arrow Clicked");
                        if (currentShowcaseImageIndex > 0) {
                            if(typeof displayShowcaseImage === 'function') {
                                displayShowcaseImage(currentShowcaseImageIndex - 1);
                            }
                        }
                    });
                    console.log("[Debug] Attached listener to showcasePrevBtn");
                } else { console.warn("[Debug] showcasePrevBtn listener not attached (element missing)."); }

                if (showcaseNextBtn) {
                    showcaseNextBtn.addEventListener('click', () => {
                        console.log("[Debug] Showcase Next Arrow Clicked");
                        const project = projects[currentProjectIndex];
                        if (project && currentShowcaseImageIndex < project.images.length - 1) {
                             if(typeof displayShowcaseImage === 'function') {
                                displayShowcaseImage(currentShowcaseImageIndex + 1);
                            }
                        }
                    });
                     console.log("[Debug] Attached listener to showcaseNextBtn");
                } else { console.warn("[Debug] showcaseNextBtn listener not attached (element missing)."); }

                // Open Modal on Showcase Image Click
                if (showcaseImageElement) {
                    showcaseImageElement.addEventListener('click', () => {
                        const project = projects[currentProjectIndex];
                        if (project && project.images && project.images.length > 0) {
                            if (showcaseImageElement.src && !showcaseImageElement.src.includes('placehold.co') && !showcaseImageElement.src.includes('Error')) {
                                console.log(`[Debug] Opening modal for project ${currentProjectIndex}, starting at showcase image index ${currentShowcaseImageIndex}`);
                                openModal(project.images, currentShowcaseImageIndex);
                            } else {
                                console.log("[Debug] Modal not opened for placeholder/error image shown in showcase.");
                            }
                        } else {
                            console.warn(`[Debug] Cannot open modal, no images found for project index ${currentProjectIndex}.`);
                        }
                    });
                    console.log("[Debug] Attached modal open listener to showcaseImageElement");
                } else { console.warn("[Debug] showcaseImageElement listener not attached (element missing)."); }

                // Modal Navigation Buttons
                if (modalPrevBtn) {
                    modalPrevBtn.addEventListener('click', () => {
                        if (currentModalImageIndex > 0) {
                            updateModalImageAndNav(currentModalImageIndex - 1);
                        }
                    });
                    console.log("[Debug] Attached listener to modalPrevBtn");
                } else { console.warn("[Debug] modalPrevBtn listener not attached (element missing)."); }

                if (modalNextBtn) {
                    modalNextBtn.addEventListener('click', () => {
                        if (currentModalImageIndex < modalImageSources.length - 1) {
                            updateModalImageAndNav(currentModalImageIndex + 1);
                        }
                    });
                    console.log("[Debug] Attached listener to modalNextBtn");
                } else { console.warn("[Debug] modalNextBtn listener not attached (element missing)."); }

                // Modal Close Button
                if (modalCloseBtn) {
                    modalCloseBtn.addEventListener('click', closeModal);
                    console.log("[Debug] Attached listener to modalCloseBtn");
                } else { console.warn("[Debug] modalCloseBtn listener not attached (element missing)."); }

                // Modal Background Close
                if (imageModal) {
                    imageModal.addEventListener('click', (event) => {
                        // Close only if the click is directly on the overlay (the #image-modal element itself)
                        if (event.target === imageModal) {
                            closeModal();
                        }
                    });
                    console.log("[Debug] Attached overlay click listener to imageModal");
                } else { console.warn("[Debug] imageModal overlay listener not attached (element missing)."); }

                // Global Keydown Listener (Handles Escape for Modal)
                document.addEventListener('keydown', (event) => {
                    // Close modal on Escape
                    if (event.key === 'Escape' && imageModal && !imageModal.classList.contains('hidden')) {
                        closeModal();
                    }
                    // Modal arrow key navigation is handled by handleModalKeyboardNav added/removed dynamically
                });
                console.log("[Debug] Attached global Escape key listener");


                // --- Image Modal Logic ---
                function openModal(imageList, startIndex) {
                    if (!imageModal || !modalImage || !modalPrevBtn || !modalNextBtn || !imageList || imageList.length === 0) {
                        console.error("[Debug] Cannot open modal - missing elements or image list.");
                        return;
                    }
                    console.log(`[Debug] Opening modal with ${imageList.length} images, starting at index ${startIndex}.`);

                    modalImageSources = imageList;
                    currentModalImageIndex = startIndex;

                    updateModalImageAndNav(currentModalImageIndex); // Display initial image and set nav state

                    imageModal.classList.remove('hidden');
                    setTimeout(() => {
                        imageModal.classList.remove('opacity-0');
                        document.body.classList.add('modal-open');
                        document.addEventListener('keydown', handleModalKeyboardNav); // Add keyboard nav listener
                        modalCloseBtn?.focus(); // Focus close button
                    }, 10);
                }

                function updateModalImageAndNav(index) {
                    if (!modalImage || !modalPrevBtn || !modalNextBtn || index < 0 || index >= modalImageSources.length) {
                        console.error(`[Debug] Invalid index (${index}) or missing elements in updateModalImageAndNav.`);
                        return;
                    }

                    currentModalImageIndex = index;
                    const imageUrl = modalImageSources[currentModalImageIndex];
                    console.log(`[Debug] Updating modal image to index ${currentModalImageIndex}: ${imageUrl}`);

                    // Preload next/prev images
                    if (currentModalImageIndex < modalImageSources.length - 1) { (new Image()).src = modalImageSources[currentModalImageIndex + 1]; }
                    if (currentModalImageIndex > 0) { (new Image()).src = modalImageSources[currentModalImageIndex - 1]; }

                    // Fade out briefly
                    modalImage.style.opacity = 0;

                     // Preload the target image before setting src
                    const tempImg = new Image();
                    tempImg.onload = () => {
                        modalImage.src = imageUrl;
                        modalImage.alt = `Project image ${currentModalImageIndex + 1} of ${modalImageSources.length}`;
                        modalImage.style.opacity = 1; // Fade in
                        modalImage.onerror = null; // Clear previous error handler
                        console.log(`[Debug] Modal image loaded successfully: ${imageUrl}`);
                    };
                    tempImg.onerror = () => {
                         console.error(`[Debug] Modal Image failed to load: ${imageUrl}`);
                         modalImage.src = 'https://placehold.co/800x600/1f2937/ef4444?text=Load+Error';
                         modalImage.style.opacity = 1; // Fade in placeholder
                    };
                    tempImg.src = imageUrl; // Start loading


                    // Update button states and visibility
                    const showNavButtons = modalImageSources.length > 1;
                    modalPrevBtn.style.display = showNavButtons ? 'block' : 'none';
                    modalNextBtn.style.display = showNavButtons ? 'block' : 'none';

                    if (showNavButtons) {
                        modalPrevBtn.disabled = currentModalImageIndex === 0;
                        modalNextBtn.disabled = currentModalImageIndex === modalImageSources.length - 1;
                    }
                }

                function closeModal() {
                    if (!imageModal) return;
                    console.log("[Debug] Closing modal.");
                    imageModal.classList.add('opacity-0');
                    document.removeEventListener('keydown', handleModalKeyboardNav); // Remove keyboard listener

                    setTimeout(() => {
                        imageModal.classList.add('hidden');
                        document.body.classList.remove('modal-open');
                        if (modalImage) modalImage.src = ""; // Clear src
                        modalImageSources = [];
                        currentModalImageIndex = 0;
                        if(modalPrevBtn) modalPrevBtn.style.display = 'none';
                        if(modalNextBtn) modalNextBtn.style.display = 'none';
                    }, 300); // Match CSS transition duration
                }

                function handleModalKeyboardNav(event) {
                    if (imageModal.classList.contains('hidden')) return; // Only act if modal is visible

                    if (event.key === 'ArrowLeft') {
                        event.preventDefault();
                        modalPrevBtn?.click();
                    } else if (event.key === 'ArrowRight') {
                        event.preventDefault();
                        modalNextBtn?.click();
                    }
                    // Escape is handled globally
                }


                // --- SMP Image Carousel Logic ---
                const smpImages = [ "images/smp1.png", "images/smp2.png", "images/smp3.png", "images/smp4.png" ]; // Ensure paths are correct
                let currentSmpImageIndex = 0;
                let smpIntervalId = null;

                function changeSmpImage() {
                    if (!smpImageElement || smpImages.length <= 1) return; // Exit if element not found or only 1 image

                    currentSmpImageIndex = (currentSmpImageIndex + 1) % smpImages.length;
                    const nextImageUrl = smpImages[currentSmpImageIndex];
                    console.log(`[Debug] Changing SMP image to index ${currentSmpImageIndex}: ${nextImageUrl}`);

                    // Preload next image
                    const preloadImg = new Image();
                    preloadImg.onload = () => {
                        // Fade out current image
                        smpImageElement.style.opacity = 0;
                        // Set new image after fade out
                        setTimeout(() => {
                            smpImageElement.src = nextImageUrl;
                            smpImageElement.alt = `Extreme Juicers SMP Screenshot ${currentSmpImageIndex + 1}`;
                            smpImageElement.onerror = () => { // Add error handling here too
                                console.error(`[Debug] SMP Image failed to load: ${nextImageUrl}`);
                                smpImageElement.src = 'https://placehold.co/800x450/1f2937/9ca3af?text=Error';
                                smpImageElement.style.opacity = 1; // Show placeholder
                            };
                            smpImageElement.onload = () => { // Handle onload for the actual element
                                smpImageElement.style.opacity = 1; // Fade in
                                smpImageElement.onerror = null; // Reset error handler
                            };
                             // Handle cached images for the actual element
                            if (smpImageElement.complete && smpImageElement.src === nextImageUrl) {
                                smpImageElement.style.opacity = 1;
                                smpImageElement.onerror = null;
                            }
                        }, 400); // Delay slightly less than transition duration
                    };
                     preloadImg.onerror = () => {
                         console.warn(`[Debug] Failed to preload SMP image: ${nextImageUrl}`);
                         // Optionally try again later or skip this cycle
                    };
                    preloadImg.src = nextImageUrl;
                }


                // Start carousel only if element exists and there's more than one image
                if (smpImageElement && smpImages.length > 1) {
                    console.log("[Debug] Starting SMP image carousel.");
                    smpIntervalId = setInterval(changeSmpImage, 5000); // Change image every 5 seconds

                    // Pause carousel on hover
                    if (smpSection) {
                        smpSection.addEventListener('mouseenter', () => {
                            if (smpIntervalId) clearInterval(smpIntervalId);
                            console.log("[Debug] SMP carousel paused on hover.");
                        });
                        smpSection.addEventListener('mouseleave', () => {
                            if (smpIntervalId) clearInterval(smpIntervalId); // Clear any existing just in case
                            smpIntervalId = setInterval(changeSmpImage, 5000);
                            console.log("[Debug] SMP carousel resumed on mouse leave.");
                        });
                    }
                } else {
                    console.log("[Debug] SMP image carousel not started (element missing or only one image).");
                     // Ensure the single image is visible if carousel doesn't start
                     if (smpImageElement) smpImageElement.style.opacity = 1;
                }

                // --- Initial Page Setup ---
                console.log("[Debug] Running initial page setup...");
                if (typeof populateGrid === 'function') {
                    populateGrid();
                } else {
                    console.error("[Debug] populateGrid function not defined during initial setup!");
                }

                if (projects.length > 0) {
                    setTimeout(() => {
                        if (typeof displayProjectDetails === 'function') {
                            console.log("[Debug] Calling initial displayProjectDetails(0) via setTimeout.");
                            displayProjectDetails(0); // Display first project
                        } else {
                            console.error('[Debug] Initial displayProjectDetails function not defined');
                        }
                    }, 100); // Slightly longer delay to ensure grid items might render
                } else {
                    // Handle case where there are no projects
                    console.log("[Debug] No projects found to display initially.");
                     if(showcaseTitleElement) showcaseTitleElement.textContent = "No Projects Yet";
                     if(showcaseDescElement) showcaseDescElement.textContent = "Check back later for project updates!";
                     if(showcaseImageElement) showcaseImageElement.src = 'https://placehold.co/600x400/1f2937/9ca3af?text=No+Projects';
                     if(showcaseTagsElement) showcaseTagsElement.innerHTML = '';
                     if(showcaseLinkElement) showcaseLinkElement.classList.add('hidden');
                     if(showcaseCounterElement) showcaseCounterElement.style.display = 'none';
                     if(showcasePrevBtn) showcasePrevBtn.style.display = 'none';
                     if(showcaseNextBtn) showcaseNextBtn.style.display = 'none';
                     // Ensure the showcase display itself is visible even if empty
                     if (showcaseDisplayElement) showcaseDisplayElement.classList.add('is-visible');
                }

                console.log("[Debug] Initial setup complete.");

            } catch (error) {
                // Catch any critical errors during initialization
                console.error("[CRITICAL] Error during script initialization:", error);
                if (styleErrorMessage) {
                    styleErrorMessage.textContent = `A critical error occurred loading the page. Please check the console (F12) for details. Error: ${error.message}`;
                    styleErrorMessage.style.display = 'block'; // Show error message bar
                }
            }
        });
    </script>

</body>
</html>
