<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Treadz - Towing Quote</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../../css/style.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        .map-container {
            position: relative;
            padding-bottom: 56.25%;
            /* 16:9 aspect ratio */
            height: 0;
            overflow: hidden;
        }

        .map-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
    </style>
</head>

<body class="antialiased h-screen flex flex-col bg-gray-100 overflow-hidden">
    <!-- Navigation -->
    <nav class="main-nav sticky top-0 z-40 p-4 w-full flex-shrink-0 bg-gray-900 text-white shadow-lg">
        <div class="max-w-full mx-auto flex items-center justify-between px-4">
            <div class="flex items-center gap-4">
                <a href="../../index.html" class="flex items-center gap-4 group">
                    <img src="../../treadztntLogo.png" alt="Treadz Logo" class="h-10 w-auto bg-white rounded-md p-0.5">
                </a>
                <span class="text-xl font-bold tracking-tight text-white hidden sm:block">TOWING DASHBOARD</span>
            </div>
            <div class="flex items-center gap-2">
                <a href="../receipt/index.html"
                    class="btn btn-secondary py-2 px-4 flex items-center gap-2 hover:bg-gray-100 hover:text-gray-900 transition-colors text-sm rounded-lg border-transparent text-white bg-transparent">
                    Receipts
                </a>
                <a href="../quote/index.html"
                    class="btn btn-secondary py-2 px-4 flex items-center gap-2 hover:bg-gray-100 hover:text-gray-900 transition-colors text-sm rounded-lg border-transparent text-white bg-transparent">
                    Quote Calculator
                </a>
                <a href="../../index.html"
                    class="btn btn-secondary py-2 px-4 flex items-center gap-2 hover:bg-gray-100 hover:text-gray-900 transition-colors text-sm rounded-lg border-transparent text-white bg-transparent">
                    Inventory
                </a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-grow flex h-full overflow-hidden">

        <!-- Left Panel: Inputs & Calculator -->
        <div
            class="w-full lg:w-1/3 bg-white border-r border-gray-200 flex flex-col h-full shadow-xl z-20 overflow-y-auto">
            <div class="p-6 border-b border-gray-100">
                <h2 class="text-xl font-bold text-gray-800 flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="text-blue-600">
                        <path
                            d="M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2" />
                        <circle cx="7" cy="17" r="2" />
                        <path d="M9 17h6" />
                        <circle cx="17" cy="17" r="2" />
                    </svg>
                    Job Details
                </h2>
            </div>

            <div class="p-6 space-y-6">
                <!-- Locations -->
                <div class="space-y-4">
                    <div>
                        <label class="block text-xs font-bold text-gray-500 uppercase mb-1">Pickup Location</label>
                        <div class="relative">
                            <input type="text" id="pickup-input" placeholder="Enter Pickup Address"
                                class="w-full pl-9 pr-3 py-2 bg-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm transition-all">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" class="absolute left-3 top-2.5 text-green-500">
                                <circle cx="12" cy="10" r="3" />
                                <path d="M12 21.7C17.3 17 20 13 20 10a8 8 0 1 0-16 0c0 3 2.7 7 8 11.7z" />
                            </svg>
                        </div>
                    </div>

                    <div>
                        <label class="block text-xs font-bold text-gray-500 uppercase mb-1">Dropoff Location</label>
                        <div class="relative">
                            <input type="text" id="dropoff-input" placeholder="Enter Destination"
                                value="409 Main Street E, Mt. Carmel, TN 37645"
                                class="w-full pl-9 pr-3 py-2 bg-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm transition-all">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" class="absolute left-3 top-2.5 text-red-500">
                                <circle cx="12" cy="10" r="3" />
                                <path d="M12 21.7C17.3 17 20 13 20 10a8 8 0 1 0-16 0c0 3 2.7 7 8 11.7z" />
                            </svg>
                        </div>
                    </div>

                    <button onclick="openRoute()"
                        class="w-full btn bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg font-medium flex items-center justify-center gap-2 shadow-sm transition-all">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polygon points="3 11 22 2 13 21 11 13 3 11"></polygon>
                        </svg>
                        Get Route & ETA (Google Maps)
                    </button>
                    <p class="text-xs text-center text-gray-400">Opens in new tab. Check miles and enter below.</p>
                </div>

                <hr class="border-gray-100">

                <!-- Calculator -->
                <div>
                    <h3 class="text-lg font-bold text-gray-800 mb-4">Quote Calculator</h3>
                    <div class="grid grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-xs font-bold text-gray-500 uppercase mb-1">Total Miles</label>
                            <input type="number" id="miles-input" value="0" min="0" step="0.1"
                                class="w-full p-2 bg-white border border-gray-300 rounded-lg text-right font-mono font-bold focus:ring-2 focus:ring-blue-500 outline-none">
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-gray-500 uppercase mb-1">Loaded Miles
                                Info</label>
                            <div class="text-xs text-gray-400 mt-2">Only charge for loaded?</div>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-xs font-bold text-gray-500 uppercase mb-1">Hook Fee ($)</label>
                            <input type="number" id="hook-fee-input" value="75.00" min="0" step="5"
                                class="w-full p-2 bg-white border border-gray-300 rounded-lg text-right font-mono font-bold focus:ring-2 focus:ring-blue-500 outline-none">
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-gray-500 uppercase mb-1">Rate / Mile ($)</label>
                            <input type="number" id="rate-input" value="4.00" min="0" step="0.50"
                                class="w-full p-2 bg-white border border-gray-300 rounded-lg text-right font-mono font-bold focus:ring-2 focus:ring-blue-500 outline-none">
                        </div>
                    </div>
                </div>

                <!-- Total Display -->
                <div class="bg-gray-900 rounded-xl p-6 text-white shadow-lg">
                    <div class="flex justify-between items-end mb-2">
                        <span class="text-gray-400 text-sm font-medium">ESTIMATED QUOTE</span>
                        <div class="text-center">
                            <span class="text-3xl font-bold" id="total-display">$75.00</span>
                        </div>
                    </div>
                    <div class="flex justify-between text-xs text-gray-500 pt-2 border-t border-gray-700 mt-2">
                        <span id="mileage-breakdown">0 miles @ $4.00</span>
                        <span>+ Hook Fee</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Panel: Map Placeholder / Quick Actions -->
        <div class="flex-grow bg-gray-100 flex flex-col p-6 hidden lg:flex">
            <div class="bg-white rounded-2xl shadow-sm border border-gray-200 flex-grow p-1 overflow-hidden relative">
                <!-- Placeholder for map visual -->
                <div class="absolute inset-0 flex flex-col items-center justify-center text-gray-300 bg-gray-50">
                    <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
                        class="mb-4">
                        <circle cx="12" cy="12" r="10" />
                        <line x1="2" y1="12" x2="22" y2="12" />
                        <path
                            d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z" />
                    </svg>
                    <p class="text-lg font-medium">Map View</p>
                    <p class="text-sm opacity-75">Click "Get Route" to open Google Maps</p>
                </div>

                <!-- If we had an Embed API Key, iframe goes here. 
                      Since we don't, we'll just show the placeholder or maybe a static map image if available. -->
            </div>
        </div>

    </main>

    <script>
        // Elements
        const milesInput = document.getElementById('miles-input');
        const hookFeeInput = document.getElementById('hook-fee-input');
        const rateInput = document.getElementById('rate-input');
        const totalDisplay = document.getElementById('total-display');
        const breakdownDisplay = document.getElementById('mileage-breakdown');

        const pickupInput = document.getElementById('pickup-input');
        const dropoffInput = document.getElementById('dropoff-input');

        function calculate() {
            const miles = parseFloat(milesInput.value) || 0;
            const hookFee = parseFloat(hookFeeInput.value) || 0;
            const rate = parseFloat(rateInput.value) || 0;

            const total = hookFee + (miles * rate);

            totalDisplay.textContent = '$' + total.toFixed(2);
            breakdownDisplay.textContent = `${miles.toFixed(1)} miles @ $${rate.toFixed(2)}`;
        }

        function openRoute() {
            const origin = encodeURIComponent(pickupInput.value);
            const destination = encodeURIComponent(dropoffInput.value);

            if (!origin || !destination) {
                alert("Please enter both pickup and dropoff locations.");
                return;
            }

            // Open Google Maps in new tab
            const url = `https://www.google.com/maps/dir/?api=1&origin=${origin}&destination=${destination}`;
            window.open(url, '_blank');
        }

        // Listeners
        milesInput.addEventListener('input', calculate);
        hookFeeInput.addEventListener('input', calculate);
        rateInput.addEventListener('input', calculate);

        // Init
        calculate();

        // Try to get geolocation for pickup if empty?
        // Basic feature for dashboard: focus on pickup input on load
        pickupInput.focus();
    </script>
</body>

</html>